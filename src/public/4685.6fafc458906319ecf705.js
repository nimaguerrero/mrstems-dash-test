(self.webpackChunkmrstems_dashboard=self.webpackChunkmrstems_dashboard||[]).push([[4685],{4685:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PrivateModule:()=>Kt});var i=n(8583),r=n(6868),o=n(639),s=n(9019),a=n(8002),l=n(1841);const c=s.N.apiUrl;let g=(()=>{class e{constructor(e){this.http=e}getTotalSales(){return this.http.get(`${c}/admins/home/total`).pipe((0,a.U)(({total:e})=>e))}getTotalSalesByMonth(e,t){return this.http.get(`${c}/admins/home/month/${e}/${t}`).pipe((0,a.U)(({total:e})=>e))}getGraphSalesXMonth(e){return this.http.get(`${c}/admins/home/graph-sales-month/${e}`).pipe((0,a.U)(({series:e})=>e))}getBestSellingSongs(e){return this.http.get(`${c}/admins/home/best-selling-songs/${e}`).pipe((0,a.U)(({songs:e})=>e))}getBestSellingTags(){return this.http.get(`${c}/admins/home/best-selling-tags`).pipe((0,a.U)(({tags:e})=>e))}getCountClients(){return this.http.get(`${c}/admins/home/count-clients`).pipe((0,a.U)(({count:e})=>e))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(l.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=n(1459),d=n(5319);function m(e){return Array.isArray(e)?e:[e]}var h=n(7709),p=n(739),f=n(8071),v=n(7574),Z=n(5257),_=n(7393);class b{constructor(e){this.total=e}call(e,t){return t.subscribe(new C(e,this.total))}}class C extends _.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}var U=n(9484),q=n(9761),T=n(5345);class A{constructor(e){this.notifier=e}call(e,t){const n=new x(e),i=(0,T.ft)(this.notifier,new T.IY(n));return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class x extends T.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let y;try{y="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Ht){y=!1}let S=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,i.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!y)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(o.Lbi))},e.\u0275prov=o.Yz7({factory:function(){return new e(o.LFG(o.Lbi))},token:e,providedIn:"root"}),e})();"undefined"!=typeof window&&window;const k=new Set;let w,I=(()=>{class e{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):N}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(e){if(!k.has(e))try{w||(w=document.createElement("style"),w.setAttribute("type","text/css"),document.head.appendChild(w)),w.sheet&&(w.sheet.insertRule(`@media ${e} {body{ }}`,0),k.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(S))},e.\u0275prov=o.Yz7({factory:function(){return new e(o.LFG(S))},token:e,providedIn:"root"}),e})();function N(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let O=(()=>{class e{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new h.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return M(m(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){const t=M(m(e)).map(e=>this._registerQuery(e).observable);let n=(0,p.aj)(t);return n=(0,f.z)(n.pipe((0,Z.q)(1)),n.pipe(e=>e.lift(new b(1)),(0,U.b)(0))),n.pipe((0,a.U)(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(({matches:e,query:n})=>{t.matches=t.matches||e,t.breakpoints[n]=e}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e);var n;const i={observable:new v.y(e=>{const n=t=>this._zone.run(()=>e.next(t));return t.addListener(n),()=>{t.removeListener(n)}}).pipe((0,q.O)(t),(0,a.U)(({matches:t})=>({query:e,matches:t})),(n=this._destroySubject,e=>e.lift(new A(n)))),mql:t};return this._queries.set(e,i),i}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(I),o.LFG(o.R0b))},e.\u0275prov=o.Yz7({factory:function(){return new e(o.LFG(I),o.LFG(o.R0b))},token:e,providedIn:"root"}),e})();function M(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var J=n(4353);let P=(()=>{class e{constructor(e){this.breakpointObserver=e,this.tags=[],this.view=[300,300],this.gradient=!0,this.showLegend=!1,this.showLabels=!0,this.isDoughnut=!1,this.legendPosition="below",this.subs=new d.w,this.colorScheme={domain:["#0D5F99","#E84361","#C88FCF","#CC4A0E"]}}ngOnInit(){this.changeSize()}ngOnDestroy(){this.subs.unsubscribe()}changeSize(){this.subs.add(this.breakpointObserver.observe(["(min-width: 500px)"]).subscribe(e=>{e.matches&&(this.view=[500,500],this.showLegend=!0)}))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(O))},e.\u0275cmp=o.Xpm({type:e,selectors:[["Pie-chart"]],inputs:{tags:"tags"},decls:1,vars:8,consts:[[3,"view","scheme","results","gradient","legend","legendPosition","labels","doughnut"]],template:function(e,t){1&e&&o._UZ(0,"ngx-charts-pie-chart",0),2&e&&o.Q6J("view",t.view)("scheme",t.colorScheme)("results",t.tags)("gradient",t.gradient)("legend",t.showLegend)("legendPosition",t.legendPosition)("labels",t.showLabels)("doughnut",t.isDoughnut)},directives:[J.JU],styles:[""]}),e})();var E=n(8424);function L(e,t){1&e&&(o.TgZ(0,"table",19),o.TgZ(1,"tr"),o.TgZ(2,"th"),o._UZ(3,"ngx-skeleton-loader",20),o.qZA(),o.TgZ(4,"th"),o._UZ(5,"ngx-skeleton-loader",20),o.qZA(),o.TgZ(6,"th"),o._UZ(7,"ngx-skeleton-loader",20),o.qZA(),o.qZA(),o.TgZ(8,"tr"),o.TgZ(9,"td"),o._UZ(10,"ngx-skeleton-loader",20),o.qZA(),o.TgZ(11,"td"),o._UZ(12,"ngx-skeleton-loader",20),o.qZA(),o.TgZ(13,"td"),o._UZ(14,"ngx-skeleton-loader",20),o.qZA(),o.qZA(),o.qZA())}function F(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"tr"),o.TgZ(2,"td",22),o._uU(3),o.qZA(),o.TgZ(4,"td",23),o._uU(5),o.qZA(),o.TgZ(6,"td",24),o._uU(7),o.qZA(),o.qZA(),o.BQk()),2&e){const e=t.$implicit;o.xp6(3),o.Oqu(e.name),o.xp6(2),o.Oqu(e.count),o.xp6(2),o.Oqu(e.total)}}function Q(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"table",19),o.TgZ(2,"tr"),o.TgZ(3,"th"),o._uU(4,"Nombre"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Cantidad"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Total"),o.qZA(),o.qZA(),o.YNc(9,F,8,3,"ng-container",21),o.qZA(),o.BQk()),2&e){const e=t.$implicit;o.xp6(9),o.Q6J("ngForOf",e)}}function Y(e,t){if(1&e&&(o.ynx(0),o._UZ(1,"Pie-chart",25),o.BQk()),2&e){const e=t.$implicit;o.xp6(1),o.Q6J("tags",e)}}function $(e,t){1&e&&o._UZ(0,"Loading")}let B=(()=>{class e{constructor(e){this.homeServ=e,this.total=0,this.totalMonth=0,this.totalPrevMonth=0,this.month=(new Date).getMonth()+1,this.year=(new Date).getFullYear(),this.limit=3,this.cclients=0}ngOnInit(){this.init()}init(){this.getTotalSales(),this.getTotalSalesByMonth(),this.getTotalSalesByPreviousMonth(),this.getBestSellingSongs(this.limit),this.getBestSellingTags(),this.getCountClients()}getTotalSales(){this.homeServ.getTotalSales().subscribe(e=>this.total=e)}getTotalSalesByMonth(){this.homeServ.getTotalSalesByMonth(this.year,this.month).subscribe(e=>this.totalMonth=e)}getTotalSalesByPreviousMonth(){this.homeServ.getTotalSalesByMonth(this.year,this.month-1).subscribe(e=>this.totalPrevMonth=e)}getBestSellingSongs(e){this.songs$=this.homeServ.getBestSellingSongs(e)}getBestSellingTags(){this.tags$=this.homeServ.getBestSellingTags()}getThreeMore(){this.limit+=3,this.getBestSellingSongs(this.limit)}getCountClients(){this.homeServ.getCountClients().subscribe(e=>this.cclients=e)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(g))},e.\u0275cmp=o.Xpm({type:e,selectors:[["Home"]],decls:52,vars:12,consts:[["loadingtable",""],[1,"cards","animated","fadein"],[1,"card"],[1,"card__content"],[1,"card__numbers"],[1,"card__name"],[1,"card__icon"],["name","card-outline"],["name","calendar-number-outline"],["name","calendar-outline"],["name","people-outline"],[1,"orders-custommers"],[1,"recent-orders"],[1,"recent-orders__header"],[1,"btn","btn--tag","btn--primary",3,"click"],[4,"ngIf","ngIfElse"],[1,"recent-tags"],[1,"recent-tags__header"],["loading",""],[1,"rwd-table","animated","fadein"],["count","1","appearance","line"],[4,"ngFor","ngForOf"],["data-th","Nombre"],["data-th","Cantidad"],["data-th","Total"],[3,"tags"]],template:function(e,t){if(1&e&&(o.YNc(0,L,15,0,"ng-template",null,0,o.W1O),o.TgZ(2,"div",1),o.TgZ(3,"div",2),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o._uU(6),o.qZA(),o.TgZ(7,"div",5),o._uU(8,"Total"),o.qZA(),o.qZA(),o.TgZ(9,"div",6),o._UZ(10,"ion-icon",7),o.qZA(),o.qZA(),o.TgZ(11,"div",2),o.TgZ(12,"div",3),o.TgZ(13,"div",4),o._uU(14),o.qZA(),o.TgZ(15,"div",5),o._uU(16,"Total del mes"),o.qZA(),o.qZA(),o.TgZ(17,"div",6),o._UZ(18,"ion-icon",8),o.qZA(),o.qZA(),o.TgZ(19,"div",2),o.TgZ(20,"div",3),o.TgZ(21,"div",4),o._uU(22),o.qZA(),o.TgZ(23,"div",5),o._uU(24,"Total del mes anterior"),o.qZA(),o.qZA(),o.TgZ(25,"div",6),o._UZ(26,"ion-icon",9),o.qZA(),o.qZA(),o.TgZ(27,"div",2),o.TgZ(28,"div",3),o.TgZ(29,"div",4),o._uU(30),o.qZA(),o.TgZ(31,"div",5),o._uU(32,"Clientes"),o.qZA(),o.qZA(),o.TgZ(33,"div",6),o._UZ(34,"ion-icon",10),o.qZA(),o.qZA(),o.qZA(),o.TgZ(35,"div",11),o.TgZ(36,"div",12),o.TgZ(37,"div",13),o.TgZ(38,"h3"),o._uU(39,"Canciones m\xe1s vendidas"),o.qZA(),o.TgZ(40,"button",14),o.NdJ("click",function(){return t.getThreeMore()}),o._uU(41," Mostrar 3 + "),o.qZA(),o.qZA(),o.YNc(42,Q,10,1,"ng-container",15),o.ALo(43,"async"),o.qZA(),o.TgZ(44,"div",16),o.TgZ(45,"div",17),o.TgZ(46,"h3"),o._uU(47,"Tags m\xe1s vendidos este mes"),o.qZA(),o.qZA(),o.YNc(48,Y,2,1,"ng-container",15),o.ALo(49,"async"),o.qZA(),o.qZA(),o.YNc(50,$,1,0,"ng-template",null,18,o.W1O)),2&e){const e=o.MAs(1),n=o.MAs(51);o.xp6(6),o.hij("S/.",t.total,""),o.xp6(8),o.hij("S/.",t.totalMonth,""),o.xp6(8),o.hij("S/.",t.totalPrevMonth,""),o.xp6(8),o.Oqu(t.cclients),o.xp6(12),o.Q6J("ngIf",o.lcZ(43,8,t.songs$))("ngIfElse",e),o.xp6(6),o.Q6J("ngIf",o.lcZ(49,10,t.tags$))("ngIfElse",n)}},directives:[i.O5,u.xr,i.sg,P,E.N],pipes:[i.Ov],styles:[".cards[_ngcontent-%COMP%]{width:100%;padding:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(15rem,1fr));grid-gap:30px}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:relative;background-color:var(--white);padding:30px;border-radius:20px;display:flex;justify-content:space-between;box-shadow:0 7px 25px #00000014;transition:background-color .2s ease-in-out}.cards[_ngcontent-%COMP%]   .card__numbers[_ngcontent-%COMP%]{position:relative;font-weight:500;font-size:2.5em;color:var(--blue);transition:color .2s ease-in-out}.cards[_ngcontent-%COMP%]   .card__name[_ngcontent-%COMP%]{margin-top:5px;font-size:1.1em}.cards[_ngcontent-%COMP%]   .card__icon[_ngcontent-%COMP%], .cards[_ngcontent-%COMP%]   .card__name[_ngcontent-%COMP%]{color:var(--black2);transition:color .2s ease-in-out}.cards[_ngcontent-%COMP%]   .card__icon[_ngcontent-%COMP%]{font-size:3.5em}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{background-color:var(--blue)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .card__icon[_ngcontent-%COMP%], .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .card__name[_ngcontent-%COMP%], .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .card__numbers[_ngcontent-%COMP%]{color:var(--white)}.orders-custommers[_ngcontent-%COMP%]{width:100%;padding:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(15rem,1fr));grid-gap:30px}.orders-custommers[_ngcontent-%COMP%]   .recent-orders[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 7px 25px #00000014;padding:0 1.875rem;grid-column:span 2}.orders-custommers[_ngcontent-%COMP%]   .recent-orders[_ngcontent-%COMP%]   .recent-orders__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.orders-custommers[_ngcontent-%COMP%]   .recent-tags[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 7px 25px #00000014;grid-column:span 2;padding:1rem 1.875rem}.orders-custommers[_ngcontent-%COMP%]   .recent-tags[_ngcontent-%COMP%]   .recent-tags__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}"]}),e})();var j=n(1856),D=n(6583),z=n(4762),R=n(8259),G=n.n(R);const W=s.N.apiUrl;let V=(()=>{class e{constructor(e){this.http=e}getClients(e,t,n){return this.http.get(`${W}/admins/clients/paginado?term=${e}&page=${t}&limit=${n}`).pipe((0,a.U)(({clients:e})=>e))}getClient(e){return this.http.get(`${W}/admins/clients/${e}`).pipe((0,a.U)(({client:e})=>e))}createClient(e){return this.http.post(`${W}/admins/clients/test`,e)}updateClient(e,t){return this.http.put(`${W}/admins/clients/${e}`,t)}deactivateClient(e){return this.http.patch(`${W}/admins/clients/${e}`,{active:!1})}activateClient(e){return this.http.patch(`${W}/admins/clients/${e}`,{active:!0})}deleteClient(e){return this.http.delete(`${W}/admins/clients/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(l.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function K(e,t){1&e&&(o.TgZ(0,"table",22),o.TgZ(1,"tr"),o.TgZ(2,"th"),o._UZ(3,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(4,"th"),o._UZ(5,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(6,"th"),o._UZ(7,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(8,"th"),o._UZ(9,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(10,"th"),o._UZ(11,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(12,"th"),o._UZ(13,"ngx-skeleton-loader",23),o.qZA(),o.qZA(),o.TgZ(14,"tr"),o.TgZ(15,"td"),o._UZ(16,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(17,"td"),o._UZ(18,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(19,"td"),o._UZ(20,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(21,"td"),o._UZ(22,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(23,"td"),o._UZ(24,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(25,"td"),o._UZ(26,"ngx-skeleton-loader",23),o.qZA(),o.qZA(),o.qZA())}function H(e,t){1&e&&(o.TgZ(0,"td",41),o.TgZ(1,"span",42),o._uU(2,"Activo"),o.qZA(),o.qZA())}function X(e,t){1&e&&(o.TgZ(0,"td",41),o.TgZ(1,"span",43),o._uU(2,"Inactivo"),o.qZA(),o.qZA())}function ee(e,t){1&e&&(o.TgZ(0,"td",44),o.TgZ(1,"span",42),o._uU(2,"Si"),o.qZA(),o.qZA())}function te(e,t){1&e&&(o.TgZ(0,"td",44),o.TgZ(1,"span",45),o._uU(2,"No"),o.qZA(),o.qZA())}function ne(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ion-icon",46),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(2).updateClient(t.uid)}),o.qZA()}}function ie(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ion-icon",47),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(2).activateClient(t.uid)}),o.qZA()}}function re(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ion-icon",48),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(2).deactivateClient(t.uid)}),o.qZA()}}function oe(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ion-icon",49),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(2).deleteClient(t.uid)}),o.qZA()}}function se(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"tr"),o.TgZ(2,"td",27),o._uU(3),o.qZA(),o.TgZ(4,"td",28),o.TgZ(5,"div",29),o._UZ(6,"img",30),o.qZA(),o.qZA(),o.TgZ(7,"td",31),o._uU(8),o.qZA(),o.TgZ(9,"td",32),o._uU(10),o.qZA(),o.TgZ(11,"td",33),o._uU(12),o.qZA(),o.YNc(13,H,3,0,"td",34),o.YNc(14,X,3,0,"td",34),o.YNc(15,ee,3,0,"td",35),o.YNc(16,te,3,0,"td",35),o.TgZ(17,"td",36),o.YNc(18,ne,1,0,"ion-icon",37),o.YNc(19,ie,1,0,"ion-icon",38),o.YNc(20,re,1,0,"ion-icon",39),o.YNc(21,oe,1,0,"ion-icon",40),o.qZA(),o.qZA(),o.BQk()),2&e){const e=t.$implicit,n=t.index;o.xp6(2),o.ekj("disabled",!e.active),o.xp6(1),o.Oqu(n+1),o.xp6(1),o.ekj("disabled",!e.active),o.xp6(2),o.Q6J("src",e.profile.url,o.LSH)("alt",e.profile.public_id),o.xp6(1),o.ekj("disabled",!e.active),o.xp6(1),o.AsE(" ",e.name," ",e.lastname," "),o.xp6(1),o.ekj("disabled",!e.active),o.xp6(1),o.hij(" ",e.email," "),o.xp6(1),o.ekj("disabled",!e.active),o.xp6(1),o.hij(" ",e.country," "),o.xp6(1),o.Q6J("ngIf",e.active),o.xp6(1),o.Q6J("ngIf",!e.active),o.xp6(1),o.Q6J("ngIf",e.test),o.xp6(1),o.Q6J("ngIf",!e.test),o.xp6(2),o.Q6J("ngIf",e.test),o.xp6(1),o.Q6J("ngIf",!e.active),o.xp6(1),o.Q6J("ngIf",e.active),o.xp6(1),o.Q6J("ngIf",e.test)}}function ae(e,t){1&e&&(o.TgZ(0,"tr",50),o.TgZ(1,"td",51),o._uU(2,"No hay resultados"),o.qZA(),o.qZA())}function le(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"table",24),o.TgZ(2,"tr"),o.TgZ(3,"th"),o._uU(4,"#"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Perfil"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Nombre"),o.qZA(),o.TgZ(9,"th"),o._uU(10,"Correo"),o.qZA(),o.TgZ(11,"th"),o._uU(12,"Pais"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Estado"),o.qZA(),o.TgZ(15,"th"),o._uU(16,"Test"),o.qZA(),o.TgZ(17,"th"),o._uU(18,"Opciones"),o.qZA(),o.qZA(),o.YNc(19,se,22,25,"ng-container",25),o.YNc(20,ae,3,0,"tr",26),o.qZA(),o.BQk()),2&e){const e=t.$implicit;o.xp6(19),o.Q6J("ngForOf",e),o.xp6(1),o.Q6J("ngIf",0==e.length)}}const ce=function(){return["/admin/clients/new"]};let ge=(()=>{class e{constructor(e,t){this.clientsServ=e,this.router=t,this.term="",this.pagination={pages:[1],longitud:1,previous:0,next:2,limit:1},this.page=1,this.subs=new d.w,this.pagesEl=[],this.limit=10,this.notPrevPage=!1,this.notNextPage=!1}ngOnInit(){this.getClients("",1)}ngOnDestroy(){this.subs.unsubscribe()}search(e){return this.getClients(e,1)}getClients(e,t){this.term=e,this.page=t,this.clients$=this.clientsServ.getClients(e,t,this.limit).pipe((0,a.U)(e=>{var{clients:t}=e,n=(0,z._T)(e,["clients"]);return this.pagination=Object.assign(Object.assign({},n),{limit:this.limit}),t})),this.subs.add(this.clients$.subscribe())}updateClient(e){this.router.navigate(["/admin/clients/",e])}deactivateClient(e){G().fire({title:"\xbfEsta seguro de desactivar este cliente?",text:"Si continua este cliente solo tendra una opcion de habilitarlo",icon:"question",confirmButtonText:"Desactivar",showCancelButton:!0}).then(t=>{t.isConfirmed&&this.clientsServ.deactivateClient(e).subscribe(({ok:e,msg:t})=>{G().fire({icon:"success",title:e,text:t}),this.getClients("",1)})})}activateClient(e){this.clientsServ.activateClient(e).subscribe(({ok:e})=>{G().fire({icon:"success",title:e,text:"Se activo esta usuario"}),this.getClients("",1)})}deleteClient(e){G().fire({title:"\xbfEsta seguro de eliminar este cliente?",text:"Si continua este cliente ser\xe1 borrado permanentemente",icon:"question",confirmButtonText:"Eliminar",showCancelButton:!0}).then(t=>{t.isConfirmed&&this.clientsServ.deleteClient(e).subscribe(({ok:e,msg:t})=>{G().fire({icon:"success",title:e,text:t}),this.getClients("",1)})})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(V),o.Y36(r.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["Clients"]],decls:40,vars:17,consts:[["loading",""],[1,"clients","animated","fadein"],[1,"clients__header"],[1,"clients__title"],["name","create-outline",1,"icon--blue"],["name","close-circle-outline",1,"icon--purple"],["name","trash-bin-outline",1,"icon--danger"],[1,"clients__content"],[1,"search"],["name","searchForNameClients","type","text","id","inline-form-input-name","placeholder","Buscar por nombre, apellido o correo",1,"form-control","mb-3","mr-sm-4",3,"keyup.enter"],["termSearchClients",""],["name","search-outline"],["routerLinkActive","router-link-active",1,"btn","btn--primary","btn--tag",3,"routerLink"],["name","add-outline"],[1,"list"],[1,"list__table"],[4,"ngIf","ngIfElse"],[1,"pagination"],["type","button",1,"btn","btn--sm",3,"disabled","click"],["name","chevron-back-outline"],["type","button",1,"btn","btn--sm","btn--primary",3,"disabled","click"],["name","chevron-forward-outline"],[1,"rwd-table","animated","fadein"],["count","1","appearance","line"],[1,"rwd-table"],[4,"ngFor","ngForOf"],["class","empty-table",4,"ngIf"],["data-th","#"],["data-th","Perfil"],[1,"user-img","img-circle"],[3,"src","alt"],["data-th","Nombre"],["data-th","Correo"],["data-th","Pais"],["data-th","Estado",4,"ngIf"],["data-th","Test",4,"ngIf"],["data-th","Opciones",1,"td-options"],["class","icon--blue","name","create-outline",3,"click",4,"ngIf"],["class","icon--blue","name","checkmark-circle-outline",3,"click",4,"ngIf"],["class","icon--purple","name","close-circle-outline",3,"click",4,"ngIf"],["class","icon--danger","name","trash-bin-outline",3,"click",4,"ngIf"],["data-th","Estado"],[1,"tag","tag--primary"],[1,"tag","tag--danger"],["data-th","Test"],[1,"tag","tag--secondary"],["name","create-outline",1,"icon--blue",3,"click"],["name","checkmark-circle-outline",1,"icon--blue",3,"click"],["name","close-circle-outline",1,"icon--purple",3,"click"],["name","trash-bin-outline",1,"icon--danger",3,"click"],[1,"empty-table"],["colspan","4"]],template:function(e,t){if(1&e){const e=o.EpF();o.YNc(0,K,27,0,"ng-template",null,0,o.W1O),o.TgZ(2,"div",1),o.TgZ(3,"div",2),o.TgZ(4,"h3",3),o._uU(5,"Clientes"),o.qZA(),o.TgZ(6,"p"),o._uU(7," Indicaciones: Los clientes que son de prueba es decir el campo Test en 'Si' tienen todas las opciones completas. "),o._UZ(8,"br"),o._UZ(9,"ion-icon",4),o._uU(10," es para editar."),o._UZ(11,"br"),o._UZ(12,"ion-icon",5),o._uU(13," es para desactivar al cliente, cambia solo el estado y obviamente no podra ingresar sesi\xf3n pero sus datos estar\xe1n intactos."),o._UZ(14,"br"),o._UZ(15,"ion-icon",6),o._uU(16," es para eliminar por completo esa cuenta."),o._UZ(17,"br"),o.qZA(),o.TgZ(18,"div",7),o.TgZ(19,"div",8),o.TgZ(20,"label"),o.TgZ(21,"input",9,10),o.NdJ("keyup.enter",function(){o.CHM(e);const n=o.MAs(22);return t.search(n.value)}),o.qZA(),o._UZ(23,"ion-icon",11),o.qZA(),o.qZA(),o.TgZ(24,"a",12),o._UZ(25,"ion-icon",13),o._uU(26," Nuevo"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(27,"div",14),o.TgZ(28,"div",15),o.YNc(29,le,21,2,"ng-container",16),o.ALo(30,"async"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(31,"div",17),o.TgZ(32,"button",18),o.NdJ("click",function(){return t.getClients(t.term,t.pagination.previous)}),o._UZ(33,"ion-icon",19),o._uU(34," Prev "),o.qZA(),o.TgZ(35,"span"),o._uU(36),o.qZA(),o.TgZ(37,"button",20),o.NdJ("click",function(){return t.getClients(t.term,t.pagination.next)}),o._uU(38," Next "),o._UZ(39,"ion-icon",21),o.qZA(),o.qZA()}if(2&e){const e=o.MAs(1);o.xp6(24),o.Q6J("routerLink",o.DdM(16,ce)),o.xp6(5),o.Q6J("ngIf",o.lcZ(30,14,t.clients$))("ngIfElse",e),o.xp6(3),o.ekj("disabled",!t.pagination.previous)("btn--primary",t.pagination.previous),o.Q6J("disabled",!t.pagination.previous),o.xp6(4),o.Oqu(t.page),o.xp6(1),o.ekj("disabled",!t.pagination.next)("btn--primary",t.pagination.next),o.Q6J("disabled",!t.pagination.next)}},directives:[r.yS,r.Od,i.O5,u.xr,i.sg],pipes:[i.Ov],styles:[".clients[_ngcontent-%COMP%]{padding:2rem}.clients[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.4;margin-bottom:1.6rem}.clients__title[_ngcontent-%COMP%]{font-size:2.5rem}.clients[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:-.2rem}.clients__content[_ngcontent-%COMP%]{justify-content:space-between}.clients__content[_ngcontent-%COMP%], .clients__content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var ue=n(665);class de{constructor(e){this.form=e}get nameClient(){const e=this.form.get("nameClient");return null==e?void 0:e.value}get lastnameClient(){const e=this.form.get("lastnameClient");return null==e?void 0:e.value}get emailClient(){const e=this.form.get("emailClient");return null==e?void 0:e.value}get genderClient(){const e=this.form.get("genderClient");return null==e?void 0:e.value}get countryClient(){const e=this.form.get("countryClient");return null==e?void 0:e.value}get phoneClient(){const e=this.form.get("phoneClient");return null==e?void 0:e.value}get passClient(){const e=this.form.get("passClient");return null==e?void 0:e.value}get perfilClient(){const e=this.form.get("perfilClient");return null==e?void 0:e.value}}class me{constructor(e){this.form=e}get nameClient(){const e=this.form.get("nameClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get lastnameClient(){const e=this.form.get("lastnameClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get emailClient(){const e=this.form.get("emailClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get genderClient(){const e=this.form.get("genderClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get phoneClient(){const e=this.form.get("phoneClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get countryClient(){const e=this.form.get("countryClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}}class he{constructor(e){this.form=e}get nameClient(){var e;const t=(null===(e=this.form.get("nameClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"nombre")}get lastnameClient(){var e;const t=(null===(e=this.form.get("lastnameClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"apellido")}get emailClient(){var e;const t=(null===(e=this.form.get("emailClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"correo")}get phoneClient(){var e;const t=(null===(e=this.form.get("phoneClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}get genderClient(){var e;const t=(null===(e=this.form.get("genderClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}get countryClient(){var e;const t=(null===(e=this.form.get("countryClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}setErrorCondition(e,t){var n,i;const r=(null===(n=null==e?void 0:e.minlength)||void 0===n?void 0:n.requiredLength)||(null===(i=null==e?void 0:e.maxlength)||void 0===i?void 0:i.requiredLength)||"";return{required:"Este campo es requerido",minlength:`Este campo tiene un tama\xf1o minimo de ${r}`,maxlength:`Este campo tiene un tama\xf1o maximo de ${r}`,pattern:`Coloque un(a) ${t} valido(a)`}[Object.keys(e)[0]]}}class pe{constructor(e){this.name="",this.lastname="",this.email="",this.country="",this.gender="",this.test=!0,this.password="123",this.phone="",this.birthday="",this.dni="",this.active=!0;const t=e.value,{nameClient:n,lastnameClient:i,emailClient:r,countryClient:o,genderClient:s}=t,a=(0,z._T)(t,["nameClient","lastnameClient","emailClient","countryClient","genderClient"]);this.name=n,this.lastname=i,this.email=r,this.country=o,this.gender=s,this.fillOtherFields(a)}fillOtherFields(e){const{phoneClient:t,activeClient:n}=e;this.phone=t||"",this.active=n||!0}}var fe=n(977);let ve=(()=>{class e{constructor(){}setNewClient(e,t){const{name:n,lastname:i,email:r}=t;e.setValue({nameClient:n,lastnameClient:i,emailClient:r,passClient:"123"})}reset(e){e.reset({nameClient:"",lastnameClient:"",emailClient:"",passClient:"123"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ze=n(9757);function _e(e,t){1&e&&(o.TgZ(0,"label",22),o._uU(1," Nombre "),o.qZA())}function be(e,t){if(1&e&&(o.TgZ(0,"label",23),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.nameClient)}}function Ce(e,t){1&e&&(o.TgZ(0,"label",24),o._uU(1," Apellido "),o.qZA())}function Ue(e,t){if(1&e&&(o.TgZ(0,"label",25),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.lastnameClient)}}function qe(e,t){1&e&&(o.TgZ(0,"label",26),o._uU(1," Correo "),o.qZA())}function Te(e,t){if(1&e&&(o.TgZ(0,"label",27),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.emailClient)}}function Ae(e,t){if(1&e&&(o.TgZ(0,"button",28),o._uU(1," Guardar "),o.qZA()),2&e){const e=o.oxw();o.Q6J("disabled",!e.clientForm.valid)}}function xe(e,t){if(1&e&&(o.TgZ(0,"button",29),o._uU(1," Actualizar "),o.qZA()),2&e){const e=o.oxw();o.Q6J("disabled",!e.clientForm.valid)}}function ye(e,t){1&e&&o._UZ(0,"Loading")}const Se=function(e){return{"border-danger":e}};let ke=(()=>{class e{constructor(e,t,n,i,r,o){this.fb=e,this.router=t,this.route=n,this.clientsServ=i,this.clientServ=r,this.validServ=o,this.isUpdate=!1,this.load=!1,this.id="",this.routeInit="/admin/clients",this.fc=new fe.h(this.router),this.subs=new d.w,this.initForm()}ngOnInit(){this.newClient()}ngOnDestroy(){this.subs.unsubscribe()}newClient(){this.route.params.subscribe(({id:e})=>{this.id=e,"new"!=e&&this.subs.add(this.clientsServ.getClient(e).subscribe(e=>{this.clientServ.setNewClient(this.clientForm,e),this.isUpdate=!0}))})}initForm(){this.clientForm=this.fb.group({nameClient:["",[ue.kI.required,ue.kI.minLength(2),ue.kI.pattern(this.validServ.onlyString)]],lastnameClient:["",[ue.kI.required,ue.kI.minLength(3),ue.kI.pattern(this.validServ.onlyString)]],emailClient:["",[ue.kI.required,ue.kI.minLength(6),ue.kI.pattern(this.validServ.onlyEmail)]],passClient:new ue.NI({value:"12345678",disabled:!0},ue.kI.required)}),this.initControls()}initControls(){this.valueCC=new de(this.clientForm),this.validCC=new me(this.clientForm),this.errorsCC=new he(this.clientForm)}submitForm(e){if(e.invalid)return Object.values(e.controls).forEach(t=>{t instanceof ue.cw?Object.values(t.controls).forEach(t=>{t.markAsTouched(),this.clientServ.reset(e)}):(t.markAsTouched(),this.clientServ.reset(e))});{const t=new pe(e);"new"===this.id?this.clientsServ.createClient(t).subscribe(({ok:e,msg:t,client:n})=>{this.fc.submitSuccess(e,t,n,this.routeInit),this.load=!0}):this.clientsServ.updateClient(this.id,t).subscribe(({ok:e,msg:t,client:n})=>{this.fc.submitSuccess(e,t,n,this.routeInit),this.load=!0})}}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ue.qu),o.Y36(r.F0),o.Y36(r.gz),o.Y36(V),o.Y36(ve),o.Y36(Ze.S))},e.\u0275cmp=o.Xpm({type:e,selectors:[["Client"]],decls:30,vars:19,consts:[[1,"client","animated","fadein"],[1,"client__header"],[1,"client__title"],["href","javascript:window.history.back()","rel","noopener",1,"tag","tag--primary"],["name","arrow-back-outline"],[1,"client__content"],["novalidate","",1,"form","animated","fadein",3,"formGroup","ngSubmit"],[1,"form__group"],["formControlName","nameClient","name","nameClient","type","text","placeholder"," ","id","nameClient",1,"form__input",3,"ngClass"],["for","nameClient","class","form__label",4,"ngIf"],["for","nameClient","class","form__label text-danger",4,"ngIf"],["formControlName","lastnameClient","name","lastnameClient","type","text","placeholder"," ","id","lastnameClient",1,"form__input",3,"ngClass"],["for","lastnameClient","class","form__label",4,"ngIf"],["for","lastnameClient","class","form__label text-danger",4,"ngIf"],["formControlName","emailClient","name","emailClient","type","text","placeholder"," ","id","emailClient",1,"form__input",3,"ngClass"],["for","emailClient","class","form__label",4,"ngIf"],["for","emailClient","class","form__label text-danger",4,"ngIf"],["formControlName","passClient","name","passClient","type","text","placeholder"," ","id","passClient",1,"form__input"],["for","passClient",1,"form__label","disabled"],["class","btn btn--primary","type","submit",3,"disabled",4,"ngIf"],["class","btn btn--secondary","type","submit",3,"disabled",4,"ngIf"],[4,"ngIf"],["for","nameClient",1,"form__label"],["for","nameClient",1,"form__label","text-danger"],["for","lastnameClient",1,"form__label"],["for","lastnameClient",1,"form__label","text-danger"],["for","emailClient",1,"form__label"],["for","emailClient",1,"form__label","text-danger"],["type","submit",1,"btn","btn--primary",3,"disabled"],["type","submit",1,"btn","btn--secondary",3,"disabled"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h3",2),o._uU(3,"Clientes"),o.qZA(),o.TgZ(4,"a",3),o._UZ(5,"ion-icon",4),o._uU(6," Ir atr\xe1s"),o.qZA(),o.qZA(),o.TgZ(7,"div",5),o.TgZ(8,"p"),o._uU(9," Crea clientes de prueba con solo estos campos requeridos, la contrase\xf1a de todo cliente de prueba es del 1 al 8 por defecto "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"form",6),o.NdJ("ngSubmit",function(){return t.submitForm(t.clientForm)}),o.TgZ(11,"div",7),o._UZ(12,"input",8),o.YNc(13,_e,2,0,"label",9),o.YNc(14,be,2,1,"label",10),o.qZA(),o.TgZ(15,"div",7),o._UZ(16,"input",11),o.YNc(17,Ce,2,0,"label",12),o.YNc(18,Ue,2,1,"label",13),o.qZA(),o.TgZ(19,"div",7),o._UZ(20,"input",14),o.YNc(21,qe,2,0,"label",15),o.YNc(22,Te,2,1,"label",16),o.qZA(),o.TgZ(23,"div",7),o._UZ(24,"input",17),o.TgZ(25,"label",18),o._uU(26," Contrase\xf1a: 12345678 "),o.qZA(),o.qZA(),o.YNc(27,Ae,2,1,"button",19),o.YNc(28,xe,2,1,"button",20),o.qZA(),o.YNc(29,ye,1,0,"Loading",21)),2&e&&(o.xp6(10),o.Q6J("formGroup",t.clientForm),o.xp6(2),o.Q6J("ngClass",o.VKq(13,Se,t.validCC.nameClient)),o.xp6(1),o.Q6J("ngIf",!t.validCC.nameClient),o.xp6(1),o.Q6J("ngIf",t.validCC.nameClient),o.xp6(2),o.Q6J("ngClass",o.VKq(15,Se,t.validCC.lastnameClient)),o.xp6(1),o.Q6J("ngIf",!t.validCC.lastnameClient),o.xp6(1),o.Q6J("ngIf",t.validCC.lastnameClient),o.xp6(2),o.Q6J("ngClass",o.VKq(17,Se,t.validCC.emailClient)),o.xp6(1),o.Q6J("ngIf",!t.validCC.emailClient),o.xp6(1),o.Q6J("ngIf",t.validCC.emailClient),o.xp6(5),o.Q6J("ngIf",!t.isUpdate),o.xp6(1),o.Q6J("ngIf",t.isUpdate),o.xp6(1),o.Q6J("ngIf",t.load))},directives:[ue._Y,ue.JL,ue.sg,ue.Fj,ue.JJ,ue.u,i.mk,i.O5,E.N],styles:[".client[_ngcontent-%COMP%]{padding:2rem}.client__title[_ngcontent-%COMP%]{font-size:2.5rem}.client__header[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between}.client__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.client__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--small-font-size);margin-right:.2rem}"]}),e})();class we{constructor(e){this.form=e}get titleSetting(){const e=this.form.get("titleSetting");return null==e?void 0:e.value}get igvSetting(){const e=this.form.get("igvSetting");return null==e?void 0:e.value}get tags(){return this.form.get("tagsSetting")}get serieSetting(){const e=this.form.get("serieSetting");return null==e?void 0:e.value}get limitSetting(){const e=this.form.get("limitSetting");return null==e?void 0:e.value}set titleSetting(e){var t;null===(t=this.form.get("titleSetting"))||void 0===t||t.setValue(e)}set tagsSetting(e){var t;null===(t=this.form.get("tagsSetting"))||void 0===t||t.setValue(e)}set valueSetting(e){var t;null===(t=this.form.get("valueSetting"))||void 0===t||t.setValue(e)}set limitSetting(e){var t;null===(t=this.form.get("limitSetting"))||void 0===t||t.setValue(e)}}class Ie{constructor(e){this.form=e}get titleSetting(){const e=this.form.get("titleSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get igvSetting(){const e=this.form.get("igvSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get tagsSetting(){const e=this.form.get("tagsSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get serieSetting(){const e=this.form.get("serieSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get correlativeSetting(){const e=this.form.get("correlativeSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}}class Ne{constructor(e){this.form=e}get titleSetting(){var e;const t=(null===(e=this.form.get("titleSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"titulo")}get igvSetting(){var e;const t=(null===(e=this.form.get("igvSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"igv")}get tagsSetting(){var e;const t=(null===(e=this.form.get("tagsSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"tags")}get serieSetting(){var e;const t=(null===(e=this.form.get("serieSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"serie")}get correlativeSetting(){var e;const t=(null===(e=this.form.get("correlativeSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"correlativo")}setErrorCondition(e,t){var n,i;const r=(null===(n=null==e?void 0:e.minlength)||void 0===n?void 0:n.requiredLength)||(null===(i=null==e?void 0:e.maxlength)||void 0===i?void 0:i.requiredLength)||"";return{required:"Este campo es requerido",minlength:`Este campo tiene un tama\xf1o minimo de ${r}`,maxlength:`Este campo tiene un tama\xf1o maximo de ${r}`,pattern:`Coloque un(a) ${t} valido(a)`}[Object.keys(e)[0]]}}class Oe{constructor(e){const{titleSetting:t,igvSetting:n,tagsSetting:i,serieSetting:r,correlativeSetting:o}=e.value;this.title=t,this.igv=n,this.tags=i,this.serie=r,this.correlative=o}}var Me=n(9530),Je=n(981);let Pe=(()=>{class e{constructor(){}setNewSetting(e,t){const{title:n,igv:i,serie:r,correlative:o}=t;e.setValue({titleSetting:n,tagsSetting:[],igvSetting:i,serieSetting:r,correlativeSetting:o})}reset(e){e.reset({titleSetting:"",serieSetting:"01",igvSetting:0,correlativeSetting:"0001"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ee=s.N.apiUrl;let Le=(()=>{class e{constructor(e){this.http=e}getSetting(){return this.http.get(`${Ee}/admins/settings`).pipe((0,a.U)(({setting:e})=>e))}updateSetting(e,t,n,i,r){const o=new FormData;return this.destructureData(e,t,n,o,i,r),this.http.put(`${Ee}/admins/settings`,o)}getImg(e){return e.includes("https")||e.includes("http")?e:"https://res.cloudinary.com/gigga/image/upload/v1633757380/mrstems/no-image_dgujkr.jpg"}destructureData(e,t,n,i,r,o){const{title:s,igv:a,tags:l,serie:c,correlative:g}=e;s&&i.append("title",s);for(const u of l)i.append("tags",JSON.stringify(u));i.append("igv",a),i.append("serie",c),i.append("correlative",g),i.append("fileLogo",t),i.append("fileLogoWhite",n),r&&i.append("pidLogo",r),o&&i.append("pidLogoWhite",o)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(l.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Fe=["dropLogoConfig"],Qe=["dropLogoWhiteConfig"];function Ye(e,t){1&e&&(o.TgZ(0,"label",45),o._uU(1," Titulo "),o.qZA())}function $e(e,t){if(1&e&&(o.TgZ(0,"label",46),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.titleSetting)}}function Be(e,t){1&e&&(o.TgZ(0,"label",47),o._uU(1," Serie "),o.qZA())}function je(e,t){if(1&e&&(o.TgZ(0,"label",48),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.serieSetting)}}function De(e,t){1&e&&(o.TgZ(0,"label",49),o._uU(1," Correlativo "),o.qZA())}function ze(e,t){if(1&e&&(o.TgZ(0,"label",50),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.correlativeSetting)}}function Re(e,t){1&e&&(o.TgZ(0,"label",51),o._uU(1," igv "),o.qZA())}function Ge(e,t){if(1&e&&(o.TgZ(0,"label",52),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.igvSetting)}}function We(e,t){if(1&e&&(o.TgZ(0,"tr"),o.ynx(1,53),o.TgZ(2,"td",54),o._UZ(3,"input",55),o.qZA(),o.TgZ(4,"td",56),o._UZ(5,"input",57),o.qZA(),o.BQk(),o.TgZ(6,"td",58),o.TgZ(7,"button",59),o._UZ(8,"ion-icon",60),o.qZA(),o.qZA(),o.qZA()),2&e){const e=t.index;o.xp6(1),o.Q6J("formGroupName",e)}}function Ve(e,t){1&e&&o._UZ(0,"Loading")}const Ke=function(e){return{"border-danger":e}};let He=(()=>{class e{constructor(e,t,n,i,r){this.render=e,this.fb=t,this.router=n,this.settingServ=i,this.settingsServ=r,this.fc=new fe.h(this.router),this.id="",this.subs=new d.w,this.load=!1,this.pidLogo="",this.pidLogoWhite="",this.imgTypes=Je.G,this.imgSelectLogo="",this.imgSelectLogoWhite="",this.imgElLogo=this.render.createElement("img"),this.imgElLogoWhite=this.render.createElement("img"),this.initForm()}ngOnInit(){this.initSetting()}ngOnDestroy(){this.subs.unsubscribe()}ngDoCheck(){this.render.setAttribute(this.imgElLogo,"src",this.imgSelectLogo),this.dropLogoConfig&&this.render.appendChild(this.dropLogoConfig.nativeElement,this.imgElLogo),this.render.setAttribute(this.imgElLogoWhite,"src",this.imgSelectLogoWhite),this.dropLogoWhiteConfig&&(this.render.appendChild(this.dropLogoWhiteConfig.nativeElement,this.imgElLogoWhite),this.render.addClass(this.dropLogoWhiteConfig.nativeElement,"drop-blue"))}initSetting(){this.subs.add(this.settingsServ.getSetting().subscribe(e=>{this.settingServ.setNewSetting(this.settingForm,e),this.imgSelectLogo=this.settingsServ.getImg(e.logo.url),this.pidLogo=e.logo.public_id,this.imgSelectLogoWhite=this.settingsServ.getImg(e.logo_white.url),this.pidLogoWhite=e.logo_white.public_id,e.tags.forEach(e=>{this.valueCC.tags.push(this.fb.group({tagName:[e.tagName,ue.kI.required],icon:[e.icon,ue.kI.required]}))})}))}initForm(){this.settingForm=this.fb.group({titleSetting:["",ue.kI.required],igvSetting:[0,ue.kI.required],tagsSetting:this.fb.array([]),serieSetting:["001",ue.kI.required],correlativeSetting:["001",ue.kI.required]}),this.initControls()}initControls(){this.valueCC=new we(this.settingForm),this.validCC=new Ie(this.settingForm),this.errorsCC=new Ne(this.settingForm)}submitForm(e){if(e.invalid)return Object.values(e.controls).forEach(t=>{t instanceof ue.cw?Object.values(t.controls).forEach(t=>{t.markAsTouched(),this.settingServ.reset(e)}):(t.markAsTouched(),this.settingServ.reset(e))});{this.load=!0;const t=new Oe(e);this.settingsServ.updateSetting(t,this.fileLogo,this.fileLogoWhite,this.pidLogo,this.pidLogoWhite).subscribe(({ok:e,msg:t,setting:n})=>{this.fc.submitSuccessNoRedirect(e,t,n),this.load=!1})}}addTag(){this.valueCC.tags.push(this.fb.group({tagName:["",ue.kI.required],icon:["",ue.kI.required]}))}onFileChangeLogo(e){let t=new FileReader;const n=new Me.f;if(n.existImg(e)){let i=e.target.files[0];n.typesImg(i,this.imgTypes)&&n.sizeImg(i,4e6)?(t.onload=e=>this.imgSelectLogo=t.result,t.readAsDataURL(i),this.fileLogo=i):this.imgSelectLogo=""}}onFileChangeLogoWhite(e){let t=new FileReader;const n=new Me.f;if(n.existImg(e)){let i=e.target.files[0];n.typesImg(i,this.imgTypes)&&n.sizeImg(i,4e6)?(t.onload=e=>this.imgSelectLogoWhite=t.result,t.readAsDataURL(i),this.fileLogoWhite=i):this.imgSelectLogoWhite=""}}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.Qsj),o.Y36(ue.qu),o.Y36(r.F0),o.Y36(Pe),o.Y36(Le))},e.\u0275cmp=o.Xpm({type:e,selectors:[["Settings"]],viewQuery:function(e,t){if(1&e&&(o.Gf(Fe,5),o.Gf(Qe,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.dropLogoConfig=e.first),o.iGM(e=o.CRH())&&(t.dropLogoWhiteConfig=e.first)}},decls:86,vars:24,consts:[[1,"setting","animated","fadein"],[1,"setting__header"],[1,"setting__title"],["href","javascript:window.history.back()","rel","noopener",1,"tag","tag--primary"],["name","arrow-back-outline"],[1,"setting__content"],["novalidate","",1,"form","form--settings","animated","fadein",3,"formGroup","ngSubmit"],[1,"form__group"],["formControlName","titleSetting","name","titleSetting","type","text","placeholder"," ","id","titleSetting",1,"form__input",3,"ngClass"],["for","titleSetting","class","form__label",4,"ngIf"],["for","titleSetting","class","form__label text-danger",4,"ngIf"],["formControlName","serieSetting","name","serieSetting","type","text","placeholder"," ","id","serieSetting",1,"form__input",3,"ngClass"],["for","serieSetting","class","form__label",4,"ngIf"],["for","serieSetting","class","form__label text-danger",4,"ngIf"],["formControlName","correlativeSetting","name","correlativeSetting","type","text","placeholder"," ","id","correlativeSetting",1,"form__input",3,"ngClass"],["for","correlativeSetting","class","form__label",4,"ngIf"],["for","correlativeSetting","class","form__label text-danger",4,"ngIf"],["formControlName","igvSetting","name","igvSetting","type","number","placeholder"," ","id","igvSetting",1,"form__input",3,"ngClass"],["for","igvSetting","class","form__label",4,"ngIf"],["for","igvSetting","class","form__label text-danger",4,"ngIf"],[1,"form__group","form__group--uploader"],[1,"uploader"],["dropLogoConfig",""],["id","file-logo","type","file","name","fileUpload","accept","image/*",3,"change"],["for","file-logo","id","file-drag"],["id","file-image","src","#","alt","Preview",1,"hidden"],["id","start"],["name","download-outline"],["id","notimage",1,"hidden"],["id","file-upload-btn",1,"btn","btn-primary"],["id","response",1,"hidden"],["id","messages"],["id","file-progress","value","0",1,"progress"],[1,"uploader","uploader--gray"],["dropLogoWhiteConfig",""],["id","file-logo-white","type","file","name","fileUpload","accept","image/*",3,"change"],["for","file-logo-white","id","file-drag"],[1,"form__group","form__group--table"],[1,"rwd-table"],["formArrayName","tagsSetting"],[4,"ngFor","ngForOf"],["data-th","Agrega un tag","colspan","3"],["type","button",1,"btn","btn--block",3,"click"],["type","submit",1,"btn","btn--secondary",3,"disabled"],[4,"ngIf"],["for","titleSetting",1,"form__label"],["for","titleSetting",1,"form__label","text-danger"],["for","serieSetting",1,"form__label"],["for","serieSetting",1,"form__label","text-danger"],["for","correlativeSetting",1,"form__label"],["for","correlativeSetting",1,"form__label","text-danger"],["for","igvSetting",1,"form__label"],["for","igvSetting",1,"form__label","text-danger"],[3,"formGroupName"],["data-th","Nombre"],["type","text","id","text-input","placeholder","Nombre","formControlName","tagName","name","tagName",1,"form-control"],["data-th","Icono"],["type","text","id","text-input","placeholder","Icono","formControlName","icon","name","icon",1,"form-control"],["data-th","Eliminar"],["type","button",1,"btn","btn--danger","btn--icon"],["name","trash-outline"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h3",2),o._uU(3,"Configuraciones"),o.qZA(),o.TgZ(4,"a",3),o._UZ(5,"ion-icon",4),o._uU(6," Ir atr\xe1s"),o.qZA(),o.qZA(),o.TgZ(7,"div",5),o.TgZ(8,"p"),o._uU(9,"Configuracion para tickets y tags"),o.qZA(),o.qZA(),o.qZA(),o._UZ(10,"hr"),o.TgZ(11,"form",6),o.NdJ("ngSubmit",function(){return t.submitForm(t.settingForm)}),o.TgZ(12,"div",7),o._UZ(13,"input",8),o.YNc(14,Ye,2,0,"label",9),o.YNc(15,$e,2,1,"label",10),o.qZA(),o.TgZ(16,"div",7),o._UZ(17,"input",11),o.YNc(18,Be,2,0,"label",12),o.YNc(19,je,2,1,"label",13),o.qZA(),o.TgZ(20,"div",7),o._UZ(21,"input",14),o.YNc(22,De,2,0,"label",15),o.YNc(23,ze,2,1,"label",16),o.qZA(),o.TgZ(24,"div",7),o._UZ(25,"input",17),o.YNc(26,Re,2,0,"label",18),o.YNc(27,Ge,2,1,"label",19),o.qZA(),o.TgZ(28,"div",20),o.TgZ(29,"div",21,22),o.TgZ(31,"input",23),o.NdJ("change",function(e){return t.onFileChangeLogo(e)}),o.qZA(),o.TgZ(32,"label",24),o._UZ(33,"img",25),o.TgZ(34,"div",26),o._UZ(35,"ion-icon",27),o.TgZ(36,"div"),o._uU(37,"Seleccione logo o arrastrelo aqui"),o.qZA(),o.TgZ(38,"div",28),o._uU(39,"Seleccione logo"),o.qZA(),o.TgZ(40,"span",29),o._uU(41,"Seleccione logo"),o.qZA(),o.qZA(),o.TgZ(42,"div",30),o._UZ(43,"div",31),o.TgZ(44,"progress",32),o.TgZ(45,"span"),o._uU(46,"0"),o.qZA(),o._uU(47,"% "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(48,"div",20),o.TgZ(49,"div",33,34),o.TgZ(51,"input",35),o.NdJ("change",function(e){return t.onFileChangeLogoWhite(e)}),o.qZA(),o.TgZ(52,"label",36),o._UZ(53,"img",25),o.TgZ(54,"div",26),o._UZ(55,"ion-icon",27),o.TgZ(56,"div"),o._uU(57,"Seleccione logo blanco o arrastrelo aqui"),o.qZA(),o.TgZ(58,"div",28),o._uU(59,"Seleccione logo blanco"),o.qZA(),o.TgZ(60,"span",29),o._uU(61,"Seleccione logo blanco"),o.qZA(),o.qZA(),o.TgZ(62,"div",30),o._UZ(63,"div",31),o.TgZ(64,"progress",32),o.TgZ(65,"span"),o._uU(66,"0"),o.qZA(),o._uU(67,"% "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(68,"div",37),o.TgZ(69,"table",38),o.TgZ(70,"tr"),o.TgZ(71,"th"),o._uU(72,"Nombre"),o.qZA(),o.TgZ(73,"th"),o._uU(74,"Icono"),o.qZA(),o.TgZ(75,"th"),o._uU(76,"Eliminar"),o.qZA(),o.qZA(),o.TgZ(77,"tbody",39),o.YNc(78,We,9,1,"tr",40),o.TgZ(79,"tr"),o.TgZ(80,"td",41),o.TgZ(81,"button",42),o.NdJ("click",function(){return t.addTag()}),o._uU(82," + Agregar "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(83,"button",43),o._uU(84," Actualizar "),o.qZA(),o.qZA(),o.YNc(85,Ve,1,0,"Loading",44)),2&e&&(o.xp6(11),o.Q6J("formGroup",t.settingForm),o.xp6(2),o.Q6J("ngClass",o.VKq(16,Ke,t.validCC.titleSetting)),o.xp6(1),o.Q6J("ngIf",!t.validCC.titleSetting),o.xp6(1),o.Q6J("ngIf",t.validCC.titleSetting),o.xp6(2),o.Q6J("ngClass",o.VKq(18,Ke,t.validCC.serieSetting)),o.xp6(1),o.Q6J("ngIf",!t.validCC.serieSetting),o.xp6(1),o.Q6J("ngIf",t.validCC.serieSetting),o.xp6(2),o.Q6J("ngClass",o.VKq(20,Ke,t.validCC.correlativeSetting)),o.xp6(1),o.Q6J("ngIf",!t.validCC.correlativeSetting),o.xp6(1),o.Q6J("ngIf",t.validCC.correlativeSetting),o.xp6(2),o.Q6J("ngClass",o.VKq(22,Ke,t.validCC.igvSetting)),o.xp6(1),o.Q6J("ngIf",!t.validCC.igvSetting),o.xp6(1),o.Q6J("ngIf",t.validCC.igvSetting),o.xp6(51),o.Q6J("ngForOf",t.valueCC.tags.controls),o.xp6(5),o.Q6J("disabled",!t.settingForm.valid),o.xp6(2),o.Q6J("ngIf",t.load))},directives:[ue._Y,ue.JL,ue.sg,ue.Fj,ue.JJ,ue.u,i.mk,i.O5,ue.wV,ue.CE,i.sg,ue.x0,E.N],styles:[".setting[_ngcontent-%COMP%]{padding:2rem}.setting__title[_ngcontent-%COMP%]{font-size:2.5rem}.setting__header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-end;justify-content:space-between}.setting__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.setting__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--small-font-size);margin-right:.2rem}.form--settings[_ngcontent-%COMP%]{grid-template-rows:.3fr 1.7fr}@media screen and (max-width: 430px){.form--settings[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(10rem,1fr))}}.form__group--table[_ngcontent-%COMP%]{grid-column:span 2}button[_ngcontent-%COMP%]{max-height:3rem}"]}),e})();class Xe{constructor(e){this.form=e}get nameUser(){const e=this.form.get("nameUser");return null==e?void 0:e.value}get lastnameUser(){const e=this.form.get("lastnameUser");return null==e?void 0:e.value}get emailUser(){const e=this.form.get("emailUser");return null==e?void 0:e.value}get genderUser(){const e=this.form.get("genderUser");return null==e?void 0:e.value}get countryUser(){const e=this.form.get("countryUser");return null==e?void 0:e.value}get roleUser(){const e=this.form.get("roleUser");return null==e?void 0:e.value}get phoneUser(){const e=this.form.get("phoneUser");return null==e?void 0:e.value}get passUser(){const e=this.form.get("passUser");return null==e?void 0:e.value}get perfilUser(){const e=this.form.get("perfilUser");return null==e?void 0:e.value}}class et{constructor(e){this.form=e}get nameUser(){const e=this.form.get("nameUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get lastnameUser(){const e=this.form.get("lastnameUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get emailUser(){const e=this.form.get("emailUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get passUser(){const e=this.form.get("passUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get roleUser(){const e=this.form.get("roleUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get genderUser(){const e=this.form.get("genderUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get phoneUser(){const e=this.form.get("phoneUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get countryUser(){const e=this.form.get("countryUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}}class tt{constructor(e){this.form=e}get nameUser(){var e;const t=(null===(e=this.form.get("nameUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"nombre")}get lastnameUser(){var e;const t=(null===(e=this.form.get("lastnameUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"apellido")}get emailUser(){var e;const t=(null===(e=this.form.get("emailUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"correo")}get phoneUser(){var e;const t=(null===(e=this.form.get("phoneUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}get genderUser(){var e;const t=(null===(e=this.form.get("genderUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"genero")}get passUser(){var e;const t=(null===(e=this.form.get("passUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"contrase\xf1a")}get roleUser(){var e;const t=(null===(e=this.form.get("roleUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"role")}get countryUser(){var e;const t=(null===(e=this.form.get("countryUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}setErrorCondition(e,t){var n,i;const r=(null===(n=null==e?void 0:e.minlength)||void 0===n?void 0:n.requiredLength)||(null===(i=null==e?void 0:e.maxlength)||void 0===i?void 0:i.requiredLength)||"";return{required:"Este campo es requerido",minlength:`Este campo tiene un tama\xf1o minimo de ${r}`,maxlength:`Este campo tiene un tama\xf1o maximo de ${r}`,pattern:`Coloque un(a) ${t} valido(a)`}[Object.keys(e)[0]]}}class nt{constructor(e){this.name="",this.lastname="",this.email="",this.country="",this.gender="",this.role="USER",this.password="",this.phone="",this.birthday="",this.dni="",this.active=!0;const t=e.value,{nameUser:n,lastnameUser:i,emailUser:r,passUser:o,countryUser:s,genderUser:a,roleUser:l}=t,c=(0,z._T)(t,["nameUser","lastnameUser","emailUser","passUser","countryUser","genderUser","roleUser"]);this.name=n,this.lastname=i,this.email=r,this.password=o,this.country=s,this.gender=a,this.role=l,this.fillOtherFields(c)}fillOtherFields(e){const{phoneUser:t}=e;this.phone=t||""}}const it=s.N.apiUrl;let rt=(()=>{class e{constructor(e){this.http=e}getUsers(e,t,n){return this.http.get(`${it}/admins/users/paginado?term=${e}&page=${t}&limit=${n}`).pipe((0,a.U)(({users:e})=>e))}getUser(e){return this.http.get(`${it}/admins/users/${e}`).pipe((0,a.U)(({user:e})=>e))}createUser(e,t,n){const i=new FormData;return this.destructureData(e,t,i,n),this.http.post(`${it}/admins/users`,i)}updateUser(e,t,n,i){const r=new FormData;return this.destructureData(t,n,r,i),this.http.put(`${it}/admins/users/${e}`,r)}deactivateUser(e){return this.http.patch(`${it}/admins/users/${e}`,{active:!1})}activateUser(e){return this.http.patch(`${it}/admins/users/${e}`,{active:!0})}deleteUser(e){return this.http.delete(`${it}/admins/users/${e}`)}getImg(e){return e.includes("https")||e.includes("http")?e:""}destructureData(e,t,n,i){const{name:r,lastname:o,gender:s,password:a,email:l,phone:c,country:g,role:u}=e;n.append("name",r),n.append("lastname",o),n.append("gender",s),n.append("email",l),n.append("phone",c),n.append("country",g),n.append("role",u),a&&n.append("password",a),n.append("file",t),i&&n.append("public_id",i)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(l.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ot=(()=>{class e{constructor(){}setNewUser(e,t){const{name:n,lastname:i,email:r,country:o,phone:s,gender:a,role:l}=t;e.setValue({nameUser:n,lastnameUser:i,emailUser:r,passUser:"********",countryUser:o,genderUser:a,phoneUser:s,roleUser:l})}reset(e){e.reset({nameUser:"",lastnameUser:"",emailUser:"",passUser:"",countryUser:"Peru",genderUser:"M",roleUser:"USER"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const st=["dropProfile"];function at(e,t){1&e&&(o.TgZ(0,"label",50),o._uU(1," Nombre "),o.qZA())}function lt(e,t){if(1&e&&(o.TgZ(0,"label",51),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.nameUser)}}function ct(e,t){1&e&&(o.TgZ(0,"label",52),o._uU(1," Apellido "),o.qZA())}function gt(e,t){if(1&e&&(o.TgZ(0,"label",53),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.lastnameUser)}}function ut(e,t){1&e&&(o.TgZ(0,"label",54),o._uU(1," Correo "),o.qZA())}function dt(e,t){if(1&e&&(o.TgZ(0,"label",55),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.emailUser)}}function mt(e,t){1&e&&(o.TgZ(0,"label",56),o._uU(1," Telefono "),o.qZA())}function ht(e,t){if(1&e&&(o.TgZ(0,"label",57),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.phoneUser)}}function pt(e,t){1&e&&(o.TgZ(0,"label",58),o._uU(1," Telefono "),o.qZA())}function ft(e,t){if(1&e&&(o.TgZ(0,"label",59),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.countryUser)}}function vt(e,t){1&e&&(o.TgZ(0,"label",60),o._uU(1," Rol "),o.qZA())}function Zt(e,t){if(1&e&&(o.TgZ(0,"label",61),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.errorsCC.roleUser)}}function _t(e,t){if(1&e&&(o.TgZ(0,"button",62),o._uU(1," Guardar "),o.qZA()),2&e){const e=o.oxw();o.Q6J("disabled",!e.userForm.valid)}}function bt(e,t){if(1&e&&(o.TgZ(0,"button",63),o._uU(1," Actualizar "),o.qZA()),2&e){const e=o.oxw();o.Q6J("disabled",!e.userForm.valid)}}function Ct(e,t){1&e&&o._UZ(0,"Loading")}const Ut=function(e){return{"border-danger":e}},qt=function(e){return{disabled:e}};let Tt=(()=>{class e{constructor(e,t,n,i,r,o,s){this.render=e,this.fb=t,this.router=n,this.route=i,this.usersDataServ=r,this.userDataServ=o,this.validServ=s,this.public_id="",this.isUpdate=!1,this.id="",this.load=!1,this.routeInit="/admin/users",this.fc=new fe.h(this.router),this.subs=new d.w,this.imgTypes=Je.G,this.imgSelect="",this.imgEl=this.render.createElement("img"),this.initForm()}ngOnInit(){this.newUser()}ngOnDestroy(){this.subs.unsubscribe()}ngDoCheck(){this.render.setAttribute(this.imgEl,"src",this.imgSelect),this.dropProfile&&this.render.appendChild(this.dropProfile.nativeElement,this.imgEl)}newUser(){this.route.params.subscribe(({id:e})=>{this.id=e,"new"!=e&&this.subs.add(this.usersDataServ.getUser(e).subscribe(e=>{this.userDataServ.setNewUser(this.userForm,e),this.imgSelect=this.usersDataServ.getImg(e.profile.url),this.public_id=e.profile.public_id,this.isUpdate=!0}))})}initForm(){this.userForm=this.fb.group({nameUser:["",[ue.kI.required,ue.kI.minLength(2),ue.kI.pattern(this.validServ.onlyString)]],lastnameUser:["",[ue.kI.required,ue.kI.minLength(3),ue.kI.pattern(this.validServ.onlyString)]],emailUser:["",[ue.kI.required,ue.kI.minLength(6),ue.kI.pattern(this.validServ.onlyEmail)]],passUser:["",[ue.kI.required,ue.kI.minLength(8)]],countryUser:["Peru"],genderUser:["M",ue.kI.required],phoneUser:[""],roleUser:["USER",ue.kI.required]}),this.initControls()}initControls(){this.valueCC=new Xe(this.userForm),this.validCC=new et(this.userForm),this.errorsCC=new tt(this.userForm)}submitForm(e){if(e.invalid)return Object.values(e.controls).forEach(t=>{t instanceof ue.cw?Object.values(t.controls).forEach(t=>{t.markAsTouched(),this.userDataServ.reset(e)}):(t.markAsTouched(),this.userDataServ.reset(e))});{const t=new nt(e);"new"===this.id?this.usersDataServ.createUser(t,this.file,this.public_id).subscribe(({ok:e,msg:t,user:n})=>{this.fc.submitSuccess(e,t,n,this.routeInit),this.load=!0}):this.usersDataServ.updateUser(this.id,t,this.file,this.public_id).subscribe(({ok:e,msg:t,user:n})=>{console.log(n),this.fc.submitSuccess(e,t,n,this.routeInit),this.load=!0})}}onFileChange(e){let t=new FileReader;const n=new Me.f;if(n.existImg(e)){let i=e.target.files[0];n.typesImg(i,this.imgTypes)&&n.sizeImg(i,4e6)?(t.onload=e=>this.imgSelect=t.result,t.readAsDataURL(i),this.file=i):this.imgSelect=""}}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.Qsj),o.Y36(ue.qu),o.Y36(r.F0),o.Y36(r.gz),o.Y36(rt),o.Y36(ot),o.Y36(Ze.S))},e.\u0275cmp=o.Xpm({type:e,selectors:[["User"]],viewQuery:function(e,t){if(1&e&&o.Gf(st,5),2&e){let e;o.iGM(e=o.CRH())&&(t.dropProfile=e.first)}},decls:73,vars:39,consts:[[1,"user","animated","fadein"],[1,"user__header"],[1,"user__title"],["href","javascript:window.history.back()","rel","noopener",1,"tag","tag--primary"],["name","arrow-back-outline"],[1,"user__content"],["novalidate","",1,"form","animated","fadein",3,"formGroup","ngSubmit"],[1,"form__group"],["formControlName","nameUser","name","nameUser","type","text","placeholder"," ","id","nameUser",1,"form__input",3,"ngClass"],["for","nameUser","class","form__label",4,"ngIf"],["for","nameUser","class","form__label text-danger",4,"ngIf"],["formControlName","lastnameUser","name","lastnameUser","type","text","placeholder"," ","id","lastnameUser",1,"form__input",3,"ngClass"],["for","lastnameUser","class","form__label",4,"ngIf"],["for","lastnameUser","class","form__label text-danger",4,"ngIf"],["formControlName","emailUser","name","emailUser","type","email","placeholder"," ","id","emailUser",1,"form__input",3,"ngClass"],["for","emailUser","class","form__label",4,"ngIf"],["for","emailUser","class","form__label text-danger",4,"ngIf"],["formControlName","phoneUser","name","phoneUser","type","text","placeholder"," ","id","phoneUser",1,"form__input",3,"ngClass"],["for","phoneUser","class","form__label",4,"ngIf"],["for","phoneUser","class","form__label text-danger",4,"ngIf"],["formControlName","countryUser","name","countryUser","type","text","placeholder"," ","id","countryUser",1,"form__input",3,"ngClass"],["for","countryUser","class","form__label",4,"ngIf"],["for","countryUser","class","form__label text-danger",4,"ngIf"],["formControlName","roleUser","name","roleUser","type","text","placeholder"," ","id","roleUser",1,"form__input",3,"ngClass"],["for","roleUser","class","form__label",4,"ngIf"],["for","roleUser","class","form__label text-danger",4,"ngIf"],["formControlName","passUser","name","passUser","type","text","placeholder"," ","id","passUser",1,"form__input",3,"ngClass"],["for","passUser",1,"form__label"],[1,"form__group","form__group--uploader"],[1,"uploader"],["dropProfile",""],["id","file-logo-white","type","file","name","fileUpload","accept","image/*",3,"change"],["for","file-logo-white","id","file-drag"],["id","file-image","src","#","alt","Preview",1,"hidden"],["id","start"],["name","download-outline"],["id","notimage",1,"hidden"],["id","file-upload-btn",1,"btn","btn-primary"],["id","response",1,"hidden"],["id","messages"],["id","file-progress","value","0",1,"progress"],["for","select-input",1,"form-label"],[1,"form-check","form-check-inline"],["formControlName","genderUser","type","radio","id","ex-radio-4","name","genderUser","value","M",1,"form-check-input"],["for","ex-radio-4",1,"form-check-label"],["formControlName","genderUser","type","radio","id","ex-radio-5","name","genderUser","value","F",1,"form-check-input"],["for","ex-radio-5",1,"form-check-label"],["class","btn btn--primary","type","submit",3,"disabled",4,"ngIf"],["class","btn btn--secondary","type","submit",3,"disabled",4,"ngIf"],[4,"ngIf"],["for","nameUser",1,"form__label"],["for","nameUser",1,"form__label","text-danger"],["for","lastnameUser",1,"form__label"],["for","lastnameUser",1,"form__label","text-danger"],["for","emailUser",1,"form__label"],["for","emailUser",1,"form__label","text-danger"],["for","phoneUser",1,"form__label"],["for","phoneUser",1,"form__label","text-danger"],["for","countryUser",1,"form__label"],["for","countryUser",1,"form__label","text-danger"],["for","roleUser",1,"form__label"],["for","roleUser",1,"form__label","text-danger"],["type","submit",1,"btn","btn--primary",3,"disabled"],["type","submit",1,"btn","btn--secondary",3,"disabled"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h3",2),o._uU(3,"Usuarios"),o.qZA(),o.TgZ(4,"a",3),o._UZ(5,"ion-icon",4),o._uU(6," Ir atr\xe1s"),o.qZA(),o.qZA(),o.TgZ(7,"div",5),o.TgZ(8,"p"),o._uU(9,"Crea los usuarios con solo estos campos requeridos"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"form",6),o.NdJ("ngSubmit",function(){return t.submitForm(t.userForm)}),o.TgZ(11,"div",7),o._UZ(12,"input",8),o.YNc(13,at,2,0,"label",9),o.YNc(14,lt,2,1,"label",10),o.qZA(),o.TgZ(15,"div",7),o._UZ(16,"input",11),o.YNc(17,ct,2,0,"label",12),o.YNc(18,gt,2,1,"label",13),o.qZA(),o.TgZ(19,"div",7),o._UZ(20,"input",14),o.YNc(21,ut,2,0,"label",15),o.YNc(22,dt,2,1,"label",16),o.qZA(),o.TgZ(23,"div",7),o._UZ(24,"input",17),o.YNc(25,mt,2,0,"label",18),o.YNc(26,ht,2,1,"label",19),o.qZA(),o.TgZ(27,"div",7),o._UZ(28,"input",20),o.YNc(29,pt,2,0,"label",21),o.YNc(30,ft,2,1,"label",22),o.qZA(),o.TgZ(31,"div",7),o._UZ(32,"input",23),o.YNc(33,vt,2,0,"label",24),o.YNc(34,Zt,2,1,"label",25),o.qZA(),o.TgZ(35,"div",7),o._UZ(36,"input",26),o.TgZ(37,"label",27),o._uU(38," Contrase\xf1a "),o.qZA(),o.qZA(),o.TgZ(39,"div",28),o.TgZ(40,"div",29,30),o.TgZ(42,"input",31),o.NdJ("change",function(e){return t.onFileChange(e)}),o.qZA(),o.TgZ(43,"label",32),o._UZ(44,"img",33),o.TgZ(45,"div",34),o._UZ(46,"ion-icon",35),o.TgZ(47,"div"),o._uU(48,"Seleccione imagen o arrastrelo aqui"),o.qZA(),o.TgZ(49,"div",36),o._uU(50,"Seleccione imagen"),o.qZA(),o.TgZ(51,"span",37),o._uU(52,"Seleccione imagen"),o.qZA(),o.qZA(),o.TgZ(53,"div",38),o._UZ(54,"div",39),o.TgZ(55,"progress",40),o.TgZ(56,"span"),o._uU(57,"0"),o.qZA(),o._uU(58,"% "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(59,"div",7),o.TgZ(60,"label",41),o._uU(61,"Genero "),o.qZA(),o.TgZ(62,"div",42),o._UZ(63,"input",43),o.TgZ(64,"label",44),o._uU(65,"M"),o.qZA(),o.qZA(),o.TgZ(66,"div",42),o._UZ(67,"input",45),o.TgZ(68,"label",46),o._uU(69,"F"),o.qZA(),o.qZA(),o.qZA(),o.YNc(70,_t,2,1,"button",47),o.YNc(71,bt,2,1,"button",48),o.qZA(),o.YNc(72,Ct,1,0,"Loading",49)),2&e&&(o.xp6(10),o.Q6J("formGroup",t.userForm),o.xp6(2),o.Q6J("ngClass",o.VKq(25,Ut,t.validCC.nameUser)),o.xp6(1),o.Q6J("ngIf",!t.validCC.nameUser),o.xp6(1),o.Q6J("ngIf",t.validCC.nameUser),o.xp6(2),o.Q6J("ngClass",o.VKq(27,Ut,t.validCC.lastnameUser)),o.xp6(1),o.Q6J("ngIf",!t.validCC.lastnameUser),o.xp6(1),o.Q6J("ngIf",t.validCC.lastnameUser),o.xp6(2),o.Q6J("ngClass",o.VKq(29,Ut,t.validCC.emailUser)),o.xp6(1),o.Q6J("ngIf",!t.validCC.emailUser),o.xp6(1),o.Q6J("ngIf",t.validCC.emailUser),o.xp6(2),o.Q6J("ngClass",o.VKq(31,Ut,t.validCC.phoneUser)),o.xp6(1),o.Q6J("ngIf",!t.validCC.phoneUser),o.xp6(1),o.Q6J("ngIf",t.validCC.phoneUser),o.xp6(2),o.Q6J("ngClass",o.VKq(33,Ut,t.validCC.countryUser)),o.xp6(1),o.Q6J("ngIf",!t.validCC.countryUser),o.xp6(1),o.Q6J("ngIf",t.validCC.countryUser),o.xp6(2),o.ekj("disabled",t.isUpdate),o.Q6J("ngClass",o.VKq(35,Ut,t.validCC.roleUser)),o.xp6(1),o.Q6J("ngIf",!t.validCC.roleUser),o.xp6(1),o.Q6J("ngIf",t.validCC.roleUser),o.xp6(2),o.Q6J("ngClass",o.VKq(37,qt,t.isUpdate)),o.xp6(34),o.Q6J("ngIf",!t.isUpdate),o.xp6(1),o.Q6J("ngIf",t.isUpdate),o.xp6(1),o.Q6J("ngIf",t.load))},directives:[ue._Y,ue.JL,ue.sg,ue.Fj,ue.JJ,ue.u,i.mk,i.O5,ue._,E.N],styles:[".user[_ngcontent-%COMP%]{padding:2rem}.user__title[_ngcontent-%COMP%]{font-size:2.5rem}.user__header[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between}.user__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.user__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--small-font-size);margin-right:.2rem}"]}),e})();var At=n(8613);function xt(e,t){1&e&&(o.TgZ(0,"table",22),o.TgZ(1,"tr"),o.TgZ(2,"th"),o._UZ(3,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(4,"th"),o._UZ(5,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(6,"th"),o._UZ(7,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(8,"th"),o._UZ(9,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(10,"th"),o._UZ(11,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(12,"th"),o._UZ(13,"ngx-skeleton-loader",23),o.qZA(),o.qZA(),o.TgZ(14,"tr"),o.TgZ(15,"td"),o._UZ(16,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(17,"td"),o._UZ(18,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(19,"td"),o._UZ(20,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(21,"td"),o._UZ(22,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(23,"td"),o._UZ(24,"ngx-skeleton-loader",23),o.qZA(),o.TgZ(25,"td"),o._UZ(26,"ngx-skeleton-loader",23),o.qZA(),o.qZA(),o.qZA())}function yt(e,t){if(1&e&&(o.TgZ(0,"td",40),o.TgZ(1,"span",41),o._uU(2,"Activo"),o.qZA(),o.qZA()),2&e){const e=o.oxw().$implicit;o.ekj("disabled",!e.active)}}function St(e,t){1&e&&(o.TgZ(0,"td",40),o.TgZ(1,"span",42),o._uU(2,"Inactivo"),o.qZA(),o.qZA())}function kt(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ion-icon",43),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(2).updateUser(t.uid)}),o.qZA()}}function wt(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ion-icon",44),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(2).activateUser(t.uid)}),o.qZA()}}function It(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ion-icon",45),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(2).deactivateUser(t.uid)}),o.qZA()}}function Nt(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"tr"),o.TgZ(2,"td",27),o._uU(3),o.qZA(),o.TgZ(4,"td",28),o.TgZ(5,"div",29),o._UZ(6,"img",30),o.qZA(),o.qZA(),o.TgZ(7,"td",31),o._uU(8),o.qZA(),o.TgZ(9,"td",32),o._uU(10),o.qZA(),o.TgZ(11,"td",33),o._uU(12),o.qZA(),o.YNc(13,yt,3,2,"td",34),o.YNc(14,St,3,0,"td",35),o.TgZ(15,"td",36),o.YNc(16,kt,1,0,"ion-icon",37),o.YNc(17,wt,1,0,"ion-icon",38),o.YNc(18,It,1,0,"ion-icon",39),o.qZA(),o.qZA(),o.BQk()),2&e){const e=t.$implicit,n=t.index,i=o.oxw(2);o.xp6(2),o.ekj("disabled",!e.active),o.xp6(1),o.Oqu(n+1),o.xp6(1),o.ekj("disabled",!e.active),o.xp6(2),o.Q6J("src",e.profile.url,o.LSH)("alt",e.profile.public_id),o.xp6(1),o.ekj("disabled",!e.active),o.xp6(1),o.AsE(" ",e.name," ",e.lastname," "),o.xp6(1),o.ekj("disabled",!e.active),o.xp6(1),o.hij(" ",e.email," "),o.xp6(1),o.ekj("disabled",!e.active),o.xp6(1),o.hij(" ",e.role," "),o.xp6(1),o.Q6J("ngIf",e.active),o.xp6(1),o.Q6J("ngIf",!e.active),o.xp6(2),o.Q6J("ngIf",e.active),o.xp6(1),o.Q6J("ngIf",!e.active),o.xp6(1),o.Q6J("ngIf",e.active&&!i.noBtnDeactivateUserDash(e.uid))}}function Ot(e,t){1&e&&(o.TgZ(0,"tr",46),o.TgZ(1,"td",47),o._uU(2,"No hay resultados"),o.qZA(),o.qZA())}function Mt(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"table",24),o.TgZ(2,"tr"),o.TgZ(3,"th"),o._uU(4,"#"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Perfil"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Nombre"),o.qZA(),o.TgZ(9,"th"),o._uU(10,"Correo"),o.qZA(),o.TgZ(11,"th"),o._uU(12,"Rol"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Estado"),o.qZA(),o.TgZ(15,"th"),o._uU(16,"Opciones"),o.qZA(),o.qZA(),o.YNc(17,Nt,19,22,"ng-container",25),o.YNc(18,Ot,3,0,"tr",26),o.qZA(),o.BQk()),2&e){const e=t.$implicit;o.xp6(17),o.Q6J("ngForOf",e),o.xp6(1),o.Q6J("ngIf",0==e.length)}}const Jt=function(){return["/admin/users/new"]};let Pt=(()=>{class e{constructor(e,t,n){this.usersDataServ=e,this.userServ=t,this.router=n,this.term="",this.page=1,this.pagination={pages:[1],longitud:1,previous:0,next:2,limit:1},this.subs=new d.w,this.pagesEl=[],this.limit=10,this.notPrevPage=!1,this.notNextPage=!1}ngOnInit(){this.getUsers("",1)}ngOnDestroy(){this.subs.unsubscribe()}search(e){return this.getUsers(e,1)}getUsers(e,t){this.term=e,this.page=t,this.users$=this.usersDataServ.getUsers(e,t,this.limit).pipe((0,a.U)(e=>{var{users:t}=e,n=(0,z._T)(e,["users"]);return this.pagination=Object.assign(Object.assign({},n),{limit:this.limit}),t})),this.subs.add(this.users$.subscribe())}updateUser(e){this.router.navigate(["/admin/users/",e])}deactivateUser(e){G().fire({title:"\xbfEsta seguro de desactivar este usuario?",text:"Si continua este usuario solo tendra una opcion de habilitarlo",icon:"question",confirmButtonText:"Desactivar",showCancelButton:!0}).then(t=>{t.isConfirmed&&this.usersDataServ.deactivateUser(e).subscribe(({ok:e,msg:t})=>{G().fire({icon:"success",title:e,text:t}),this.getUsers("",1)})})}activateUser(e){this.usersDataServ.activateUser(e).subscribe(({ok:e})=>{G().fire({icon:"success",title:e,text:"Se activo esta usuario"}),this.getUsers("",1)})}deleteUser(e){G().fire({title:"\xbfEsta seguro de eliminar este usuario?",text:"Si continua este usuario se borrara permanentemente",icon:"question",confirmButtonText:"Eliminar",showCancelButton:!0}).then(t=>{t.isConfirmed&&this.usersDataServ.deleteUser(e).subscribe(({ok:e,msg:t})=>{G().fire({icon:"success",title:e,text:t}),this.getUsers("",1)})})}noBtnDeactivateUserDash(e){const{user:t}=this.userServ.getTokenInformation();return t.uid==e}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(rt),o.Y36(At.K),o.Y36(r.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["Users"]],decls:45,vars:17,consts:[["loading",""],[1,"users","animated","fadein"],[1,"users__header"],[1,"users__title"],["name","create-outline",1,"icon--blue"],["name","checkmark-circle-outline",1,"icon--blue"],["name","close-circle-outline",1,"icon--purple"],[1,"users__content"],[1,"search"],["name","searchForNameUsers","type","text","id","inline-form-input-name","placeholder","Buscar por nombre, apellido o correo",1,"form-control","mb-3","mr-sm-4",3,"keyup.enter"],["termSearchUsers",""],["name","search-outline"],["routerLinkActive","router-link-active",1,"btn","btn--primary","btn--tag",3,"routerLink"],["name","add-outline"],[1,"list"],[1,"list__table"],[4,"ngIf","ngIfElse"],[1,"pagination"],["type","button",1,"btn","btn--sm",3,"disabled","click"],["name","chevron-back-outline"],["type","button",1,"btn","btn--sm","btn--primary",3,"disabled","click"],["name","chevron-forward-outline"],[1,"rwd-table","animated","fadein"],["count","1","appearance","line"],[1,"rwd-table"],[4,"ngFor","ngForOf"],["class","empty-table",4,"ngIf"],["data-th","#"],["data-th","Cover"],[1,"user-img","img-circle"],[3,"src","alt"],["data-th","Nombre"],["data-th","Correo"],["data-th","Pais"],["data-th","Estado",3,"disabled",4,"ngIf"],["data-th","Estado",4,"ngIf"],["data-th","Opciones",1,"td-options"],["class","icon--blue","name","create-outline",3,"click",4,"ngIf"],["class","icon--blue","name","checkmark-circle-outline",3,"click",4,"ngIf"],["class","icon--purple","name","close-circle-outline",3,"click",4,"ngIf"],["data-th","Estado"],[1,"tag","tag--primary"],[1,"tag","tag--danger"],["name","create-outline",1,"icon--blue",3,"click"],["name","checkmark-circle-outline",1,"icon--blue",3,"click"],["name","close-circle-outline",1,"icon--purple",3,"click"],[1,"empty-table"],["colspan","4"]],template:function(e,t){if(1&e){const e=o.EpF();o.YNc(0,xt,27,0,"ng-template",null,0,o.W1O),o.TgZ(2,"div",1),o.TgZ(3,"div",2),o.TgZ(4,"h3",3),o._uU(5,"Usuarios"),o.qZA(),o.TgZ(6,"p"),o._uU(7," Indicaciones: Los usuarios creados pueden ser de rol USER O ADMIN "),o._UZ(8,"br"),o._UZ(9,"ion-icon",4),o._uU(10," es para editar."),o._UZ(11,"br"),o._UZ(12,"ion-icon",5),o._uU(13," es para activar la canci\xf3n "),o._UZ(14,"br"),o._UZ(15,"ion-icon",6),o._uU(16," es para desactivar al usuario, cambia solo el estado y obviamente no podra ingresar sesi\xf3n pero sus datos estar\xe1n intactos."),o._UZ(17,"br"),o.TgZ(18,"strong"),o._uU(19,"* Un usuario desactivado va a estar en gris toda la fila menos las opciones"),o.qZA(),o._UZ(20,"br"),o.TgZ(21,"strong"),o._uU(22,"* Tu usuario cuando entras no se puede desactivar"),o.qZA(),o.qZA(),o.TgZ(23,"div",7),o.TgZ(24,"div",8),o.TgZ(25,"label"),o.TgZ(26,"input",9,10),o.NdJ("keyup.enter",function(){o.CHM(e);const n=o.MAs(27);return t.search(n.value)}),o.qZA(),o._UZ(28,"ion-icon",11),o.qZA(),o.qZA(),o.TgZ(29,"a",12),o._UZ(30,"ion-icon",13),o._uU(31," Nuevo"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(32,"div",14),o.TgZ(33,"div",15),o.YNc(34,Mt,19,2,"ng-container",16),o.ALo(35,"async"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(36,"div",17),o.TgZ(37,"button",18),o.NdJ("click",function(){return t.getUsers(t.term,t.pagination.previous)}),o._UZ(38,"ion-icon",19),o._uU(39," Prev "),o.qZA(),o.TgZ(40,"span"),o._uU(41),o.qZA(),o.TgZ(42,"button",20),o.NdJ("click",function(){return t.getUsers(t.term,t.pagination.next)}),o._uU(43," Next "),o._UZ(44,"ion-icon",21),o.qZA(),o.qZA()}if(2&e){const e=o.MAs(1);o.xp6(29),o.Q6J("routerLink",o.DdM(16,Jt)),o.xp6(5),o.Q6J("ngIf",o.lcZ(35,14,t.users$))("ngIfElse",e),o.xp6(3),o.ekj("disabled",!t.pagination.previous)("btn--primary",t.pagination.previous),o.Q6J("disabled",!t.pagination.previous),o.xp6(4),o.Oqu(t.page),o.xp6(1),o.ekj("disabled",!t.pagination.next)("btn--primary",t.pagination.next),o.Q6J("disabled",!t.pagination.next)}},directives:[r.yS,r.Od,i.O5,u.xr,i.sg],pipes:[i.Ov],styles:[".users[_ngcontent-%COMP%]{padding:2rem}.users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.4;margin-bottom:1.6rem}.users__title[_ngcontent-%COMP%]{font-size:2.5rem}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:-.2rem}.users__content[_ngcontent-%COMP%]{justify-content:space-between}.users__content[_ngcontent-%COMP%], .users__content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var Et=n(534),Lt=n(1202),Ft=n(3502);const Qt=function(e){return{"main-active":e}};let Yt=(()=>{class e{constructor(e){this.toggleServ=e,this.isToggleActive=!1,this.isToggleActive$=this.toggleServ.isToggleActiveSub.asObservable()}ngOnInit(){this.isToggleActive$.subscribe(e=>this.isToggleActive=e)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(Et.Y))},e.\u0275cmp=o.Xpm({type:e,selectors:[["Private"]],decls:5,vars:3,consts:[[1,"container"],[1,"main",3,"ngClass"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"Sidebar"),o.TgZ(2,"div",1),o._UZ(3,"Navbar"),o._UZ(4,"router-outlet"),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Q6J("ngClass",o.VKq(1,Qt,t.isToggleActive)))},directives:[Lt.k,i.mk,Ft.S,r.lC],encapsulation:2}),e})();const $t=s.N.apiUrl;let Bt=(()=>{class e{constructor(e){this.http=e}getCollections(){return this.http.get(`${$t}/admins/backups/names-collections`).pipe((0,a.U)(({names:e})=>e))}backup(e){return this.http.post(`${$t}/admins/backups/backup`,e)}backupCompressed(e){return this.http.post(`${$t}/admins/backups/backup-gzip`,e)}backupCollection(e,t){return this.http.post(`${$t}/admins/backups/backup/${e}`,t)}restore(e){return this.http.post(`${$t}/admins/backups/restore`,{directory:e})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(l.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function jt(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"option",13),o._uU(2),o.qZA(),o.BQk()),2&e){const e=t.$implicit;o.xp6(1),o.Q6J("value",e.name),o.xp6(1),o.hij(" ",e.name," ")}}function Dt(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"option",13),o._uU(2),o.qZA(),o.BQk()),2&e){const e=t.$implicit;o.xp6(1),o.Q6J("value",e.name),o.xp6(1),o.hij(" ",e.name," ")}}const zt=[{path:"",canActivateChild:[j.p,D.u],component:Yt,children:[{path:"backups",data:{role:"ADMIN"},component:(()=>{class e{constructor(e){this.backsServ=e,this.collections=[],this.collection="",this.collectionR=""}ngOnInit(){this.getCollections()}getCollections(){this.backsServ.getCollections().subscribe(e=>this.collections=e)}backup(){const e=document.getElementById("dir");return this.backsServ.backup({directory:e.value}).subscribe(({msg:e})=>{console.log(e),G().fire({icon:"success",title:"Backup",text:e})},e=>{G().fire({icon:"error",title:"Backup",text:e.error.msg})})}backupCompressed(){const e=document.getElementById("dir");return this.backsServ.backupCompressed({directory:e.value}).subscribe(({msg:e})=>{console.log(e),G().fire({icon:"success",title:"Backup",text:e})},e=>{G().fire({icon:"error",title:"Backup",text:e.error.msg})})}chooseCollection(e){this.collection=e.value}chooseCollectionRestore(e){this.collectionR=e.value}backupCollection(){if(""!==this.collection){const e=document.getElementById("dir");this.backsServ.backupCollection(this.collection,{directory:e.value}).subscribe(({msg:e})=>{console.log(e),G().fire({icon:"success",title:"Backup",text:e})},e=>{G().fire({icon:"error",title:"Backup",text:e.error.msg})})}else G().fire({title:"No eligio coleccion",icon:"warning",text:"No eligio coleccion"})}restore(){const e=document.getElementById("dirRestore");return this.backsServ.restore(e.value).subscribe(({msg:e})=>{console.log(e),G().fire({icon:"success",title:"Restore",text:e})},e=>{console.log(e),G().fire({icon:"error",title:"Restore",text:e.error.msg})})}restoreCollection(){if(""!==this.collectionR){const e=document.getElementById("dir");this.backsServ.backupCollection(this.collectionR,{directory:e.value}).subscribe(({msg:e})=>{console.log(e),G().fire({icon:"success",title:"Backup",text:e})},e=>{G().fire({icon:"error",title:"Backup",text:e.error.msg})})}else G().fire({title:"No eligio coleccion",icon:"warning",text:"No eligio coleccion"})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(Bt))},e.\u0275cmp=o.Xpm({type:e,selectors:[["Backups"]],decls:31,vars:2,consts:[["novalidate","",1,"form"],[1,"form__group","gc-2"],["name","dir","type","text","placeholder"," ","id","dir",1,"form__input"],["for","dir",1,"form__label"],[1,"form__group"],[1,"select"],[3,"change"],["selected","","disabled","","value",""],[4,"ngFor","ngForOf"],[1,"btn-group"],["type","button",1,"btn","btn--primary",3,"click"],["name","dir","type","text","placeholder"," ","id","dirRestore",1,"form__input"],["type","button",1,"btn","btn--danger",3,"click"],[3,"value"]],template:function(e,t){1&e&&(o.TgZ(0,"form",0),o.TgZ(1,"div",1),o._UZ(2,"input",2),o.TgZ(3,"label",3),o._uU(4," Directorio "),o.qZA(),o.qZA(),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"select",6),o.NdJ("change",function(e){return t.chooseCollection(e.target)}),o.TgZ(8,"option",7),o._uU(9,"Seleccione una coleccion"),o.qZA(),o.YNc(10,jt,3,2,"ng-container",8),o.qZA(),o.qZA(),o.qZA(),o.TgZ(11,"div",9),o.TgZ(12,"button",10),o.NdJ("click",function(){return t.backupCollection()}),o._uU(13," Backup coleccion "),o.qZA(),o.TgZ(14,"button",10),o.NdJ("click",function(){return t.backup()}),o._uU(15," Backup todo "),o.qZA(),o.qZA(),o.TgZ(16,"div",4),o._UZ(17,"input",11),o.TgZ(18,"label",3),o._uU(19," Directorio "),o.qZA(),o.qZA(),o.TgZ(20,"div",4),o.TgZ(21,"div",5),o.TgZ(22,"select",6),o.NdJ("change",function(e){return t.chooseCollectionRestore(e.target)}),o.TgZ(23,"option",7),o._uU(24,"Seleccione una coleccion"),o.qZA(),o.YNc(25,Dt,3,2,"ng-container",8),o.qZA(),o.qZA(),o.qZA(),o.TgZ(26,"div",9),o.TgZ(27,"button",12),o.NdJ("click",function(){return t.restore()}),o._uU(28," Restaurar todo "),o.qZA(),o.TgZ(29,"button",12),o.NdJ("click",function(){return t.restore()}),o._uU(30," Restaura coleccion "),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(10),o.Q6J("ngForOf",t.collections),o.xp6(15),o.Q6J("ngForOf",t.collections))},directives:[ue._Y,ue.JL,ue.YN,ue.Kr,i.sg],styles:[".btn-group[_ngcontent-%COMP%]{display:flex;grid-gap:.4rem;gap:.4rem;align-items:flex-start;justify-content:space-between}.gc-2[_ngcontent-%COMP%]{grid-column:span 2}"]}),e})()},{path:"home",data:{role:"ADMIN"},component:B},{path:"clients",data:{role:"ADMIN"},component:ge},{path:"clients/:id",data:{role:"ADMIN"},component:ke},{path:"users",data:{role:"ADMIN"},component:Pt},{path:"users/:id",data:{role:"ADMIN"},component:Tt},{path:"settings",data:{role:"ADMIN"},component:He},{path:"**",redirectTo:"home",pathMatch:"full"}]}];let Rt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.Bz.forChild(zt)],r.Bz]}),e})();class Gt{constructor(){this.baseURL="./assets/tinymce/",this.fileName="tinymce.min.js"}}"object"==typeof document&&document;let Wt=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:Gt,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez]]}),e})();var Vt=n(4466);let Kt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,Rt,r.Bz,ue.UX,Vt.m,Wt.forRoot({baseURL:"./assets/tinymce/"}),u.hx.forRoot({animation:"pulse",loadingText:"This item is actually loading..."})]]}),e})()}}]);