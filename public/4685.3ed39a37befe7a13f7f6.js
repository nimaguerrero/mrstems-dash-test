(self.webpackChunkmrstems_dashboard=self.webpackChunkmrstems_dashboard||[]).push([[4685],{4685:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PrivateModule:()=>zt});var i=n(8583),r=n(6868),s=n(639),o=n(8002),a=n(1841),l=n(9143);let c=(()=>{class e{constructor(e,t){this.http=e,this.env=t,this.apiUrl=this.env.getApiUrl()}getTotalSales(){return this.http.get(`${this.apiUrl}/admins/home/total`).pipe((0,o.U)(({total:e})=>e))}getTotalSalesByMonth(e,t){return this.http.get(`${this.apiUrl}/admins/home/month/${e}/${t}`).pipe((0,o.U)(({total:e})=>e))}getGraphSalesXMonth(e){return this.http.get(`${this.apiUrl}/admins/home/graph-sales-month/${e}`).pipe((0,o.U)(({series:e})=>e))}getBestSellingSongs(e){return this.http.get(`${this.apiUrl}/admins/home/best-selling-songs/${e}`).pipe((0,o.U)(({songs:e})=>e))}getBestSellingTags(){return this.http.get(`${this.apiUrl}/admins/home/best-selling-tags`).pipe((0,o.U)(({tags:e})=>e))}getCountClients(){return this.http.get(`${this.apiUrl}/admins/home/count-clients`).pipe((0,o.U)(({count:e})=>e))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(a.eN),s.LFG(l.I))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n(1459),u=n(5319);function d(e){return Array.isArray(e)?e:[e]}var m=n(7709),h=n(739),p=n(8071),f=n(7574),v=n(5257),Z=n(7393);class _{constructor(e){this.total=e}call(e,t){return t.subscribe(new b(e,this.total))}}class b extends Z.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}var C=n(9484),U=n(9761),q=n(5345);class A{constructor(e){this.notifier=e}call(e,t){const n=new T(e),i=(0,q.ft)(this.notifier,new q.IY(n));return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class T extends q.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let x;try{x="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Vt){x=!1}let y=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,i.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!x)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.Lbi))},e.\u0275prov=s.Yz7({factory:function(){return new e(s.LFG(s.Lbi))},token:e,providedIn:"root"}),e})();"undefined"!=typeof window&&window;const S=new Set;let k,I=(()=>{class e{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):w}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(e){if(!S.has(e))try{k||(k=document.createElement("style"),k.setAttribute("type","text/css"),document.head.appendChild(k)),k.sheet&&(k.sheet.insertRule(`@media ${e} {body{ }}`,0),S.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(y))},e.\u0275prov=s.Yz7({factory:function(){return new e(s.LFG(y))},token:e,providedIn:"root"}),e})();function w(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let N=(()=>{class e{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new m.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return O(d(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){const t=O(d(e)).map(e=>this._registerQuery(e).observable);let n=(0,h.aj)(t);return n=(0,p.z)(n.pipe((0,v.q)(1)),n.pipe(e=>e.lift(new _(1)),(0,C.b)(0))),n.pipe((0,o.U)(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(({matches:e,query:n})=>{t.matches=t.matches||e,t.breakpoints[n]=e}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e);var n;const i={observable:new f.y(e=>{const n=t=>this._zone.run(()=>e.next(t));return t.addListener(n),()=>{t.removeListener(n)}}).pipe((0,U.O)(t),(0,o.U)(({matches:t})=>({query:e,matches:t})),(n=this._destroySubject,e=>e.lift(new A(n)))),mql:t};return this._queries.set(e,i),i}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(I),s.LFG(s.R0b))},e.\u0275prov=s.Yz7({factory:function(){return new e(s.LFG(I),s.LFG(s.R0b))},token:e,providedIn:"root"}),e})();function O(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var M=n(4353);let J=(()=>{class e{constructor(e){this.breakpointObserver=e,this.tags=[],this.view=[300,300],this.gradient=!0,this.showLegend=!1,this.showLabels=!0,this.isDoughnut=!1,this.legendPosition="below",this.subs=new u.w,this.colorScheme={domain:["#0D5F99","#E84361","#C88FCF","#CC4A0E"]}}ngOnInit(){this.changeSize()}ngOnDestroy(){this.subs.unsubscribe()}changeSize(){this.subs.add(this.breakpointObserver.observe(["(min-width: 500px)"]).subscribe(e=>{e.matches&&(this.view=[500,500],this.showLegend=!0)}))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(N))},e.\u0275cmp=s.Xpm({type:e,selectors:[["Pie-chart"]],inputs:{tags:"tags"},decls:1,vars:8,consts:[[3,"view","scheme","results","gradient","legend","legendPosition","labels","doughnut"]],template:function(e,t){1&e&&s._UZ(0,"ngx-charts-pie-chart",0),2&e&&s.Q6J("view",t.view)("scheme",t.colorScheme)("results",t.tags)("gradient",t.gradient)("legend",t.showLegend)("legendPosition",t.legendPosition)("labels",t.showLabels)("doughnut",t.isDoughnut)},directives:[M.JU],styles:[""]}),e})();var P=n(8424);function E(e,t){1&e&&(s.TgZ(0,"table",19),s.TgZ(1,"tr"),s.TgZ(2,"th"),s._UZ(3,"ngx-skeleton-loader",20),s.qZA(),s.TgZ(4,"th"),s._UZ(5,"ngx-skeleton-loader",20),s.qZA(),s.TgZ(6,"th"),s._UZ(7,"ngx-skeleton-loader",20),s.qZA(),s.qZA(),s.TgZ(8,"tr"),s.TgZ(9,"td"),s._UZ(10,"ngx-skeleton-loader",20),s.qZA(),s.TgZ(11,"td"),s._UZ(12,"ngx-skeleton-loader",20),s.qZA(),s.TgZ(13,"td"),s._UZ(14,"ngx-skeleton-loader",20),s.qZA(),s.qZA(),s.qZA())}function F(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"tr"),s.TgZ(2,"td",22),s._uU(3),s.qZA(),s.TgZ(4,"td",23),s._uU(5),s.qZA(),s.TgZ(6,"td",24),s._uU(7),s.qZA(),s.qZA(),s.BQk()),2&e){const e=t.$implicit;s.xp6(3),s.Oqu(e.name),s.xp6(2),s.Oqu(e.count),s.xp6(2),s.Oqu(e.total)}}function Q(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"table",19),s.TgZ(2,"tr"),s.TgZ(3,"th"),s._uU(4,"Nombre"),s.qZA(),s.TgZ(5,"th"),s._uU(6,"Cantidad"),s.qZA(),s.TgZ(7,"th"),s._uU(8,"Total"),s.qZA(),s.qZA(),s.YNc(9,F,8,3,"ng-container",21),s.qZA(),s.BQk()),2&e){const e=t.$implicit;s.xp6(9),s.Q6J("ngForOf",e)}}function L(e,t){if(1&e&&(s.ynx(0),s._UZ(1,"Pie-chart",25),s.BQk()),2&e){const e=t.$implicit;s.xp6(1),s.Q6J("tags",e)}}function Y(e,t){1&e&&s._UZ(0,"Loading")}let $=(()=>{class e{constructor(e){this.homeServ=e,this.total=0,this.totalMonth=0,this.totalPrevMonth=0,this.month=(new Date).getMonth()+1,this.year=(new Date).getFullYear(),this.limit=3,this.cclients=0}ngOnInit(){this.init()}init(){this.getTotalSales(),this.getTotalSalesByMonth(),this.getTotalSalesByPreviousMonth(),this.getBestSellingSongs(this.limit),this.getBestSellingTags(),this.getCountClients()}getTotalSales(){this.homeServ.getTotalSales().subscribe(e=>this.total=e)}getTotalSalesByMonth(){this.homeServ.getTotalSalesByMonth(this.year,this.month).subscribe(e=>this.totalMonth=e)}getTotalSalesByPreviousMonth(){this.homeServ.getTotalSalesByMonth(this.year,this.month-1).subscribe(e=>this.totalPrevMonth=e)}getBestSellingSongs(e){this.songs$=this.homeServ.getBestSellingSongs(e)}getBestSellingTags(){this.tags$=this.homeServ.getBestSellingTags()}getThreeMore(){this.limit+=3,this.getBestSellingSongs(this.limit)}getCountClients(){this.homeServ.getCountClients().subscribe(e=>this.cclients=e)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(c))},e.\u0275cmp=s.Xpm({type:e,selectors:[["Home"]],decls:52,vars:12,consts:[["loadingtable",""],[1,"cards","animated","fadein"],[1,"card"],[1,"card__content"],[1,"card__numbers"],[1,"card__name"],[1,"card__icon"],["name","card-outline"],["name","calendar-number-outline"],["name","calendar-outline"],["name","people-outline"],[1,"orders-custommers"],[1,"recent-orders"],[1,"recent-orders__header"],[1,"btn","btn--tag","btn--primary",3,"click"],[4,"ngIf","ngIfElse"],[1,"recent-tags"],[1,"recent-tags__header"],["loading",""],[1,"rwd-table","animated","fadein"],["count","1","appearance","line"],[4,"ngFor","ngForOf"],["data-th","Nombre"],["data-th","Cantidad"],["data-th","Total"],[3,"tags"]],template:function(e,t){if(1&e&&(s.YNc(0,E,15,0,"ng-template",null,0,s.W1O),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.TgZ(4,"div",3),s.TgZ(5,"div",4),s._uU(6),s.qZA(),s.TgZ(7,"div",5),s._uU(8,"Total"),s.qZA(),s.qZA(),s.TgZ(9,"div",6),s._UZ(10,"ion-icon",7),s.qZA(),s.qZA(),s.TgZ(11,"div",2),s.TgZ(12,"div",3),s.TgZ(13,"div",4),s._uU(14),s.qZA(),s.TgZ(15,"div",5),s._uU(16,"Total del mes"),s.qZA(),s.qZA(),s.TgZ(17,"div",6),s._UZ(18,"ion-icon",8),s.qZA(),s.qZA(),s.TgZ(19,"div",2),s.TgZ(20,"div",3),s.TgZ(21,"div",4),s._uU(22),s.qZA(),s.TgZ(23,"div",5),s._uU(24,"Total del mes anterior"),s.qZA(),s.qZA(),s.TgZ(25,"div",6),s._UZ(26,"ion-icon",9),s.qZA(),s.qZA(),s.TgZ(27,"div",2),s.TgZ(28,"div",3),s.TgZ(29,"div",4),s._uU(30),s.qZA(),s.TgZ(31,"div",5),s._uU(32,"Clientes"),s.qZA(),s.qZA(),s.TgZ(33,"div",6),s._UZ(34,"ion-icon",10),s.qZA(),s.qZA(),s.qZA(),s.TgZ(35,"div",11),s.TgZ(36,"div",12),s.TgZ(37,"div",13),s.TgZ(38,"h3"),s._uU(39,"Canciones m\xe1s vendidas"),s.qZA(),s.TgZ(40,"button",14),s.NdJ("click",function(){return t.getThreeMore()}),s._uU(41," Mostrar 3 + "),s.qZA(),s.qZA(),s.YNc(42,Q,10,1,"ng-container",15),s.ALo(43,"async"),s.qZA(),s.TgZ(44,"div",16),s.TgZ(45,"div",17),s.TgZ(46,"h3"),s._uU(47,"Tags m\xe1s vendidos este mes"),s.qZA(),s.qZA(),s.YNc(48,L,2,1,"ng-container",15),s.ALo(49,"async"),s.qZA(),s.qZA(),s.YNc(50,Y,1,0,"ng-template",null,18,s.W1O)),2&e){const e=s.MAs(1),n=s.MAs(51);s.xp6(6),s.hij("S/.",t.total,""),s.xp6(8),s.hij("S/.",t.totalMonth,""),s.xp6(8),s.hij("S/.",t.totalPrevMonth,""),s.xp6(8),s.Oqu(t.cclients),s.xp6(12),s.Q6J("ngIf",s.lcZ(43,8,t.songs$))("ngIfElse",e),s.xp6(6),s.Q6J("ngIf",s.lcZ(49,10,t.tags$))("ngIfElse",n)}},directives:[i.O5,g.xr,i.sg,J,P.N],pipes:[i.Ov],styles:[".cards[_ngcontent-%COMP%]{width:100%;padding:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(15rem,1fr));grid-gap:30px}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:30px;border-radius:20px;display:flex;justify-content:space-between;box-shadow:0 7px 25px #00000014;transition:background-color .2s ease-in-out}.cards[_ngcontent-%COMP%]   .card__numbers[_ngcontent-%COMP%]{position:relative;font-weight:500;font-size:2.5em;color:#1aafd0;transition:color .2s ease-in-out}.cards[_ngcontent-%COMP%]   .card__name[_ngcontent-%COMP%]{margin-top:5px;font-size:1.1em}.cards[_ngcontent-%COMP%]   .card__icon[_ngcontent-%COMP%], .cards[_ngcontent-%COMP%]   .card__name[_ngcontent-%COMP%]{color:#282d31;transition:color .2s ease-in-out}.cards[_ngcontent-%COMP%]   .card__icon[_ngcontent-%COMP%]{font-size:3.5em}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{background-color:#1aafd0}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .card__icon[_ngcontent-%COMP%], .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .card__name[_ngcontent-%COMP%], .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .card__numbers[_ngcontent-%COMP%]{color:#fff}.orders-custommers[_ngcontent-%COMP%]{width:100%;padding:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(15rem,1fr));grid-gap:30px}.orders-custommers[_ngcontent-%COMP%]   .recent-orders[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 7px 25px #00000014;padding:0 1.875rem;grid-column:span 2}.orders-custommers[_ngcontent-%COMP%]   .recent-orders[_ngcontent-%COMP%]   .recent-orders__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.orders-custommers[_ngcontent-%COMP%]   .recent-tags[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 7px 25px #00000014;grid-column:span 2;padding:1rem 1.875rem}.orders-custommers[_ngcontent-%COMP%]   .recent-tags[_ngcontent-%COMP%]   .recent-tags__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}"]}),e})();var B=n(1856),j=n(6583),D=n(4762),G=n(8259),R=n.n(G);let z=(()=>{class e{constructor(e,t){this.http=e,this.env=t,this.apiUrl=this.env.getApiUrl()}getClients(e,t,n){return this.http.get(`${this.apiUrl}/admins/clients/paginado?term=${e}&page=${t}&limit=${n}`).pipe((0,o.U)(({clients:e})=>e))}getClient(e){return this.http.get(`${this.apiUrl}/admins/clients/${e}`).pipe((0,o.U)(({client:e})=>e))}createClient(e){return this.http.post(`${this.apiUrl}/admins/clients/test`,e)}updateClient(e,t){return this.http.put(`${this.apiUrl}/admins/clients/${e}`,t)}deactivateClient(e){return this.http.patch(`${this.apiUrl}/admins/clients/${e}`,{active:!1})}activateClient(e){return this.http.patch(`${this.apiUrl}/admins/clients/${e}`,{active:!0})}deleteClient(e){return this.http.delete(`${this.apiUrl}/admins/clients/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(a.eN),s.LFG(l.I))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function V(e,t){1&e&&(s.TgZ(0,"table",22),s.TgZ(1,"tr"),s.TgZ(2,"th"),s._UZ(3,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(4,"th"),s._UZ(5,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(6,"th"),s._UZ(7,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(8,"th"),s._UZ(9,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(10,"th"),s._UZ(11,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(12,"th"),s._UZ(13,"ngx-skeleton-loader",23),s.qZA(),s.qZA(),s.TgZ(14,"tr"),s.TgZ(15,"td"),s._UZ(16,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(17,"td"),s._UZ(18,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(19,"td"),s._UZ(20,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(21,"td"),s._UZ(22,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(23,"td"),s._UZ(24,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(25,"td"),s._UZ(26,"ngx-skeleton-loader",23),s.qZA(),s.qZA(),s.qZA())}function K(e,t){1&e&&(s.TgZ(0,"td",41),s.TgZ(1,"span",42),s._uU(2,"Activo"),s.qZA(),s.qZA())}function W(e,t){1&e&&(s.TgZ(0,"td",41),s.TgZ(1,"span",43),s._uU(2,"Inactivo"),s.qZA(),s.qZA())}function H(e,t){1&e&&(s.TgZ(0,"td",44),s.TgZ(1,"span",42),s._uU(2,"Si"),s.qZA(),s.qZA())}function X(e,t){1&e&&(s.TgZ(0,"td",44),s.TgZ(1,"span",45),s._uU(2,"No"),s.qZA(),s.qZA())}function ee(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-icon",46),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(2).updateClient(t.uid)}),s.qZA()}}function te(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-icon",47),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(2).activateClient(t.uid)}),s.qZA()}}function ne(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-icon",48),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(2).deactivateClient(t.uid)}),s.qZA()}}function ie(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-icon",49),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(2).deleteClient(t.uid)}),s.qZA()}}function re(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"tr"),s.TgZ(2,"td",27),s._uU(3),s.qZA(),s.TgZ(4,"td",28),s.TgZ(5,"div",29),s._UZ(6,"img",30),s.qZA(),s.qZA(),s.TgZ(7,"td",31),s._uU(8),s.qZA(),s.TgZ(9,"td",32),s._uU(10),s.qZA(),s.TgZ(11,"td",33),s._uU(12),s.qZA(),s.YNc(13,K,3,0,"td",34),s.YNc(14,W,3,0,"td",34),s.YNc(15,H,3,0,"td",35),s.YNc(16,X,3,0,"td",35),s.TgZ(17,"td",36),s.YNc(18,ee,1,0,"ion-icon",37),s.YNc(19,te,1,0,"ion-icon",38),s.YNc(20,ne,1,0,"ion-icon",39),s.YNc(21,ie,1,0,"ion-icon",40),s.qZA(),s.qZA(),s.BQk()),2&e){const e=t.$implicit,n=t.index;s.xp6(2),s.ekj("disabled",!e.active),s.xp6(1),s.Oqu(n+1),s.xp6(1),s.ekj("disabled",!e.active),s.xp6(2),s.Q6J("src",e.profile.url,s.LSH)("alt",e.profile.public_id),s.xp6(1),s.ekj("disabled",!e.active),s.xp6(1),s.AsE(" ",e.name," ",e.lastname," "),s.xp6(1),s.ekj("disabled",!e.active),s.xp6(1),s.hij(" ",e.email," "),s.xp6(1),s.ekj("disabled",!e.active),s.xp6(1),s.hij(" ",e.country," "),s.xp6(1),s.Q6J("ngIf",e.active),s.xp6(1),s.Q6J("ngIf",!e.active),s.xp6(1),s.Q6J("ngIf",e.test),s.xp6(1),s.Q6J("ngIf",!e.test),s.xp6(2),s.Q6J("ngIf",e.test),s.xp6(1),s.Q6J("ngIf",!e.active),s.xp6(1),s.Q6J("ngIf",e.active),s.xp6(1),s.Q6J("ngIf",e.test)}}function se(e,t){1&e&&(s.TgZ(0,"tr",50),s.TgZ(1,"td",51),s._uU(2,"No hay resultados"),s.qZA(),s.qZA())}function oe(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"table",24),s.TgZ(2,"tr"),s.TgZ(3,"th"),s._uU(4,"#"),s.qZA(),s.TgZ(5,"th"),s._uU(6,"Perfil"),s.qZA(),s.TgZ(7,"th"),s._uU(8,"Nombre"),s.qZA(),s.TgZ(9,"th"),s._uU(10,"Correo"),s.qZA(),s.TgZ(11,"th"),s._uU(12,"Pais"),s.qZA(),s.TgZ(13,"th"),s._uU(14,"Estado"),s.qZA(),s.TgZ(15,"th"),s._uU(16,"Test"),s.qZA(),s.TgZ(17,"th"),s._uU(18,"Opciones"),s.qZA(),s.qZA(),s.YNc(19,re,22,25,"ng-container",25),s.YNc(20,se,3,0,"tr",26),s.qZA(),s.BQk()),2&e){const e=t.$implicit;s.xp6(19),s.Q6J("ngForOf",e),s.xp6(1),s.Q6J("ngIf",0==e.length)}}const ae=function(){return["/admin/clients/new"]};let le=(()=>{class e{constructor(e,t){this.clientsServ=e,this.router=t,this.term="",this.pagination={pages:[1],longitud:1,previous:0,next:2,limit:1},this.page=1,this.subs=new u.w,this.pagesEl=[],this.limit=10,this.notPrevPage=!1,this.notNextPage=!1}ngOnInit(){this.getClients("",1)}ngOnDestroy(){this.subs.unsubscribe()}search(e){return this.getClients(e,1)}getClients(e,t){this.term=e,this.page=t,this.clients$=this.clientsServ.getClients(e,t,this.limit).pipe((0,o.U)(e=>{var{clients:t}=e,n=(0,D._T)(e,["clients"]);return this.pagination=Object.assign(Object.assign({},n),{limit:this.limit}),t})),this.subs.add(this.clients$.subscribe())}updateClient(e){this.router.navigate(["/admin/clients/",e])}deactivateClient(e){R().fire({title:"\xbfEsta seguro de desactivar este cliente?",text:"Si continua este cliente solo tendra una opcion de habilitarlo",icon:"question",confirmButtonText:"Desactivar",showCancelButton:!0}).then(t=>{t.isConfirmed&&this.clientsServ.deactivateClient(e).subscribe(({ok:e,msg:t})=>{R().fire({icon:"success",title:e,text:t}),this.getClients("",1)})})}activateClient(e){this.clientsServ.activateClient(e).subscribe(({ok:e})=>{R().fire({icon:"success",title:e,text:"Se activo esta usuario"}),this.getClients("",1)})}deleteClient(e){R().fire({title:"\xbfEsta seguro de eliminar este cliente?",text:"Si continua este cliente ser\xe1 borrado permanentemente",icon:"question",confirmButtonText:"Eliminar",showCancelButton:!0}).then(t=>{t.isConfirmed&&this.clientsServ.deleteClient(e).subscribe(({ok:e,msg:t})=>{R().fire({icon:"success",title:e,text:t}),this.getClients("",1)})})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(z),s.Y36(r.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["Clients"]],decls:40,vars:17,consts:[["loading",""],[1,"clients","animated","fadein"],[1,"clients__header"],[1,"clients__title"],["name","create-outline",1,"icon--blue"],["name","close-circle-outline",1,"icon--purple"],["name","trash-bin-outline",1,"icon--danger"],[1,"clients__content"],[1,"search"],["name","searchForNameClients","type","text","id","inline-form-input-name","placeholder","Buscar por nombre, apellido o correo",1,"form-control","mb-3","mr-sm-4",3,"keyup.enter"],["termSearchClients",""],["name","search-outline"],["routerLinkActive","router-link-active",1,"btn","btn--primary","btn--tag",3,"routerLink"],["name","add-outline"],[1,"list"],[1,"list__table"],[4,"ngIf","ngIfElse"],[1,"pagination"],["type","button",1,"btn","btn--sm",3,"disabled","click"],["name","chevron-back-outline"],["type","button",1,"btn","btn--sm","btn--primary",3,"disabled","click"],["name","chevron-forward-outline"],[1,"rwd-table","animated","fadein"],["count","1","appearance","line"],[1,"rwd-table"],[4,"ngFor","ngForOf"],["class","empty-table",4,"ngIf"],["data-th","#"],["data-th","Perfil"],[1,"user-img","img-circle"],[3,"src","alt"],["data-th","Nombre"],["data-th","Correo"],["data-th","Pais"],["data-th","Estado",4,"ngIf"],["data-th","Test",4,"ngIf"],["data-th","Opciones",1,"td-options"],["class","icon--blue","name","create-outline",3,"click",4,"ngIf"],["class","icon--blue","name","checkmark-circle-outline",3,"click",4,"ngIf"],["class","icon--purple","name","close-circle-outline",3,"click",4,"ngIf"],["class","icon--danger","name","trash-bin-outline",3,"click",4,"ngIf"],["data-th","Estado"],[1,"tag","tag--primary"],[1,"tag","tag--danger"],["data-th","Test"],[1,"tag","tag--secondary"],["name","create-outline",1,"icon--blue",3,"click"],["name","checkmark-circle-outline",1,"icon--blue",3,"click"],["name","close-circle-outline",1,"icon--purple",3,"click"],["name","trash-bin-outline",1,"icon--danger",3,"click"],[1,"empty-table"],["colspan","4"]],template:function(e,t){if(1&e){const e=s.EpF();s.YNc(0,V,27,0,"ng-template",null,0,s.W1O),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.TgZ(4,"h3",3),s._uU(5,"Clientes"),s.qZA(),s.TgZ(6,"p"),s._uU(7," Indicaciones: Los clientes que son de prueba es decir el campo Test en 'Si' tienen todas las opciones completas. "),s._UZ(8,"br"),s._UZ(9,"ion-icon",4),s._uU(10," es para editar."),s._UZ(11,"br"),s._UZ(12,"ion-icon",5),s._uU(13," es para desactivar al cliente, cambia solo el estado y obviamente no podra ingresar sesi\xf3n pero sus datos estar\xe1n intactos."),s._UZ(14,"br"),s._UZ(15,"ion-icon",6),s._uU(16," es para eliminar por completo esa cuenta."),s._UZ(17,"br"),s.qZA(),s.TgZ(18,"div",7),s.TgZ(19,"div",8),s.TgZ(20,"label"),s.TgZ(21,"input",9,10),s.NdJ("keyup.enter",function(){s.CHM(e);const n=s.MAs(22);return t.search(n.value)}),s.qZA(),s._UZ(23,"ion-icon",11),s.qZA(),s.qZA(),s.TgZ(24,"a",12),s._UZ(25,"ion-icon",13),s._uU(26," Nuevo"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div",14),s.TgZ(28,"div",15),s.YNc(29,oe,21,2,"ng-container",16),s.ALo(30,"async"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(31,"div",17),s.TgZ(32,"button",18),s.NdJ("click",function(){return t.getClients(t.term,t.pagination.previous)}),s._UZ(33,"ion-icon",19),s._uU(34," Prev "),s.qZA(),s.TgZ(35,"span"),s._uU(36),s.qZA(),s.TgZ(37,"button",20),s.NdJ("click",function(){return t.getClients(t.term,t.pagination.next)}),s._uU(38," Next "),s._UZ(39,"ion-icon",21),s.qZA(),s.qZA()}if(2&e){const e=s.MAs(1);s.xp6(24),s.Q6J("routerLink",s.DdM(16,ae)),s.xp6(5),s.Q6J("ngIf",s.lcZ(30,14,t.clients$))("ngIfElse",e),s.xp6(3),s.ekj("disabled",!t.pagination.previous)("btn--primary",t.pagination.previous),s.Q6J("disabled",!t.pagination.previous),s.xp6(4),s.Oqu(t.page),s.xp6(1),s.ekj("disabled",!t.pagination.next)("btn--primary",t.pagination.next),s.Q6J("disabled",!t.pagination.next)}},directives:[r.yS,r.Od,i.O5,g.xr,i.sg],pipes:[i.Ov],styles:[".clients[_ngcontent-%COMP%]{padding:2rem}.clients[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.4;margin-bottom:1.6rem}.clients__title[_ngcontent-%COMP%]{font-size:2.5rem}.clients[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:-.2rem}.clients__content[_ngcontent-%COMP%]{justify-content:space-between}.clients__content[_ngcontent-%COMP%], .clients__content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var ce=n(665);class ge{constructor(e){this.form=e}get nameClient(){const e=this.form.get("nameClient");return null==e?void 0:e.value}get lastnameClient(){const e=this.form.get("lastnameClient");return null==e?void 0:e.value}get emailClient(){const e=this.form.get("emailClient");return null==e?void 0:e.value}get genderClient(){const e=this.form.get("genderClient");return null==e?void 0:e.value}get countryClient(){const e=this.form.get("countryClient");return null==e?void 0:e.value}get phoneClient(){const e=this.form.get("phoneClient");return null==e?void 0:e.value}get passClient(){const e=this.form.get("passClient");return null==e?void 0:e.value}get perfilClient(){const e=this.form.get("perfilClient");return null==e?void 0:e.value}}class ue{constructor(e){this.form=e}get nameClient(){const e=this.form.get("nameClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get lastnameClient(){const e=this.form.get("lastnameClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get emailClient(){const e=this.form.get("emailClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get genderClient(){const e=this.form.get("genderClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get phoneClient(){const e=this.form.get("phoneClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get countryClient(){const e=this.form.get("countryClient");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}}class de{constructor(e){this.form=e}get nameClient(){var e;const t=(null===(e=this.form.get("nameClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"nombre")}get lastnameClient(){var e;const t=(null===(e=this.form.get("lastnameClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"apellido")}get emailClient(){var e;const t=(null===(e=this.form.get("emailClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"correo")}get phoneClient(){var e;const t=(null===(e=this.form.get("phoneClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}get genderClient(){var e;const t=(null===(e=this.form.get("genderClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}get countryClient(){var e;const t=(null===(e=this.form.get("countryClient"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}setErrorCondition(e,t){var n,i;const r=(null===(n=null==e?void 0:e.minlength)||void 0===n?void 0:n.requiredLength)||(null===(i=null==e?void 0:e.maxlength)||void 0===i?void 0:i.requiredLength)||"";return{required:"Este campo es requerido",minlength:`Este campo tiene un tama\xf1o minimo de ${r}`,maxlength:`Este campo tiene un tama\xf1o maximo de ${r}`,pattern:`Coloque un(a) ${t} valido(a)`}[Object.keys(e)[0]]}}class me{constructor(e){this.name="",this.lastname="",this.email="",this.country="",this.gender="",this.test=!0,this.password="123",this.phone="",this.birthday="",this.dni="",this.active=!0;const t=e.value,{nameClient:n,lastnameClient:i,emailClient:r,countryClient:s,genderClient:o}=t,a=(0,D._T)(t,["nameClient","lastnameClient","emailClient","countryClient","genderClient"]);this.name=n,this.lastname=i,this.email=r,this.country=s,this.gender=o,this.fillOtherFields(a)}fillOtherFields(e){const{phoneClient:t,activeClient:n}=e;this.phone=t||"",this.active=n||!0}}var he=n(977);let pe=(()=>{class e{constructor(){}setNewClient(e,t){const{name:n,lastname:i,email:r}=t;e.setValue({nameClient:n,lastnameClient:i,emailClient:r,passClient:"123"})}reset(e){e.reset({nameClient:"",lastnameClient:"",emailClient:"",passClient:"123"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var fe=n(9757);function ve(e,t){1&e&&(s.TgZ(0,"label",22),s._uU(1," Nombre "),s.qZA())}function Ze(e,t){if(1&e&&(s.TgZ(0,"label",23),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.nameClient)}}function _e(e,t){1&e&&(s.TgZ(0,"label",24),s._uU(1," Apellido "),s.qZA())}function be(e,t){if(1&e&&(s.TgZ(0,"label",25),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.lastnameClient)}}function Ce(e,t){1&e&&(s.TgZ(0,"label",26),s._uU(1," Correo "),s.qZA())}function Ue(e,t){if(1&e&&(s.TgZ(0,"label",27),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.emailClient)}}function qe(e,t){if(1&e&&(s.TgZ(0,"button",28),s._uU(1," Guardar "),s.qZA()),2&e){const e=s.oxw();s.Q6J("disabled",!e.clientForm.valid)}}const Ae=function(e){return{disabled:e}};function Te(e,t){if(1&e&&(s.TgZ(0,"button",29),s._uU(1," Actualizar "),s.qZA()),2&e){const e=s.oxw();s.Q6J("ngClass",s.VKq(2,Ae,!e.clientForm.valid))("disabled",!e.clientForm.valid)}}function xe(e,t){1&e&&s._UZ(0,"Loading")}const ye=function(e){return{"border-danger":e}};let Se=(()=>{class e{constructor(e,t,n,i,r,s){this.fb=e,this.router=t,this.route=n,this.clientsServ=i,this.clientServ=r,this.validServ=s,this.isUpdate=!1,this.load=!1,this.id="",this.routeInit="/admin/clients",this.fc=new he.h(this.router),this.subs=new u.w,this.initForm()}ngOnInit(){this.newClient()}ngOnDestroy(){this.subs.unsubscribe()}newClient(){this.route.params.subscribe(({id:e})=>{this.id=e,"new"!=e&&this.subs.add(this.clientsServ.getClient(e).subscribe(e=>{this.clientServ.setNewClient(this.clientForm,e),this.isUpdate=!0}))})}initForm(){this.clientForm=this.fb.group({nameClient:["",[ce.kI.required,ce.kI.minLength(2),ce.kI.pattern(this.validServ.onlyString)]],lastnameClient:["",[ce.kI.required,ce.kI.minLength(3),ce.kI.pattern(this.validServ.onlyString)]],emailClient:["",[ce.kI.required,ce.kI.minLength(6),ce.kI.pattern(this.validServ.onlyEmail)]],passClient:new ce.NI({value:"12345678",disabled:!0},ce.kI.required)}),this.initControls()}initControls(){this.valueCC=new ge(this.clientForm),this.validCC=new ue(this.clientForm),this.errorsCC=new de(this.clientForm)}submitForm(e){if(e.invalid)return Object.values(e.controls).forEach(t=>{t instanceof ce.cw?Object.values(t.controls).forEach(t=>{t.markAsTouched(),this.clientServ.reset(e)}):(t.markAsTouched(),this.clientServ.reset(e))});{const t=new me(e);"new"===this.id?this.clientsServ.createClient(t).subscribe(({ok:e,msg:t,client:n})=>{this.fc.submitSuccess(e,t,n,this.routeInit),this.load=!0}):this.clientsServ.updateClient(this.id,t).subscribe(({ok:e,msg:t,client:n})=>{this.fc.submitSuccess(e,t,n,this.routeInit),this.load=!0})}}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(ce.qu),s.Y36(r.F0),s.Y36(r.gz),s.Y36(z),s.Y36(pe),s.Y36(fe.S))},e.\u0275cmp=s.Xpm({type:e,selectors:[["Client"]],decls:30,vars:19,consts:[[1,"client","animated","fadein"],[1,"client__header"],[1,"client__title"],["href","javascript:window.history.back()","rel","noopener",1,"tag","tag--primary"],["name","arrow-back-outline"],[1,"client__content"],["novalidate","",1,"form","animated","fadein",3,"formGroup","ngSubmit"],[1,"form__group"],["formControlName","nameClient","name","nameClient","type","text","placeholder"," ","id","nameClient",1,"form__input",3,"ngClass"],["for","nameClient","class","form__label",4,"ngIf"],["for","nameClient","class","form__label text-danger",4,"ngIf"],["formControlName","lastnameClient","name","lastnameClient","type","text","placeholder"," ","id","lastnameClient",1,"form__input",3,"ngClass"],["for","lastnameClient","class","form__label",4,"ngIf"],["for","lastnameClient","class","form__label text-danger",4,"ngIf"],["formControlName","emailClient","name","emailClient","type","text","placeholder"," ","id","emailClient",1,"form__input",3,"ngClass"],["for","emailClient","class","form__label",4,"ngIf"],["for","emailClient","class","form__label text-danger",4,"ngIf"],["formControlName","passClient","name","passClient","type","text","placeholder"," ","id","passClient",1,"form__input"],["for","passClient",1,"form__label","disabled"],["class","btn btn--primary","type","submit",3,"disabled",4,"ngIf"],["class","btn btn--secondary","type","submit",3,"ngClass","disabled",4,"ngIf"],[4,"ngIf"],["for","nameClient",1,"form__label"],["for","nameClient",1,"form__label","text-danger"],["for","lastnameClient",1,"form__label"],["for","lastnameClient",1,"form__label","text-danger"],["for","emailClient",1,"form__label"],["for","emailClient",1,"form__label","text-danger"],["type","submit",1,"btn","btn--primary",3,"disabled"],["type","submit",1,"btn","btn--secondary",3,"ngClass","disabled"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h3",2),s._uU(3,"Clientes"),s.qZA(),s.TgZ(4,"a",3),s._UZ(5,"ion-icon",4),s._uU(6," Ir atr\xe1s"),s.qZA(),s.qZA(),s.TgZ(7,"div",5),s.TgZ(8,"p"),s._uU(9," Crea clientes de prueba con solo estos campos requeridos, la contrase\xf1a de todo cliente de prueba es del 1 al 8 por defecto "),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"form",6),s.NdJ("ngSubmit",function(){return t.submitForm(t.clientForm)}),s.TgZ(11,"div",7),s._UZ(12,"input",8),s.YNc(13,ve,2,0,"label",9),s.YNc(14,Ze,2,1,"label",10),s.qZA(),s.TgZ(15,"div",7),s._UZ(16,"input",11),s.YNc(17,_e,2,0,"label",12),s.YNc(18,be,2,1,"label",13),s.qZA(),s.TgZ(19,"div",7),s._UZ(20,"input",14),s.YNc(21,Ce,2,0,"label",15),s.YNc(22,Ue,2,1,"label",16),s.qZA(),s.TgZ(23,"div",7),s._UZ(24,"input",17),s.TgZ(25,"label",18),s._uU(26," Contrase\xf1a: 12345678 "),s.qZA(),s.qZA(),s.YNc(27,qe,2,1,"button",19),s.YNc(28,Te,2,4,"button",20),s.qZA(),s.YNc(29,xe,1,0,"Loading",21)),2&e&&(s.xp6(10),s.Q6J("formGroup",t.clientForm),s.xp6(2),s.Q6J("ngClass",s.VKq(13,ye,t.validCC.nameClient)),s.xp6(1),s.Q6J("ngIf",!t.validCC.nameClient),s.xp6(1),s.Q6J("ngIf",t.validCC.nameClient),s.xp6(2),s.Q6J("ngClass",s.VKq(15,ye,t.validCC.lastnameClient)),s.xp6(1),s.Q6J("ngIf",!t.validCC.lastnameClient),s.xp6(1),s.Q6J("ngIf",t.validCC.lastnameClient),s.xp6(2),s.Q6J("ngClass",s.VKq(17,ye,t.validCC.emailClient)),s.xp6(1),s.Q6J("ngIf",!t.validCC.emailClient),s.xp6(1),s.Q6J("ngIf",t.validCC.emailClient),s.xp6(5),s.Q6J("ngIf",!t.isUpdate),s.xp6(1),s.Q6J("ngIf",t.isUpdate),s.xp6(1),s.Q6J("ngIf",t.load))},directives:[ce._Y,ce.JL,ce.sg,ce.Fj,ce.JJ,ce.u,i.mk,i.O5,P.N],styles:[".client[_ngcontent-%COMP%]{padding:2rem}.client__title[_ngcontent-%COMP%]{font-size:2.5rem}.client__header[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between}.client__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.client__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.33rem;margin-right:.2rem}"]}),e})();class ke{constructor(e){this.form=e}get titleSetting(){const e=this.form.get("titleSetting");return null==e?void 0:e.value}get igvSetting(){const e=this.form.get("igvSetting");return null==e?void 0:e.value}get tags(){return this.form.get("tagsSetting")}get serieSetting(){const e=this.form.get("serieSetting");return null==e?void 0:e.value}get limitSetting(){const e=this.form.get("limitSetting");return null==e?void 0:e.value}set titleSetting(e){var t;null===(t=this.form.get("titleSetting"))||void 0===t||t.setValue(e)}set tagsSetting(e){var t;null===(t=this.form.get("tagsSetting"))||void 0===t||t.setValue(e)}set valueSetting(e){var t;null===(t=this.form.get("valueSetting"))||void 0===t||t.setValue(e)}set limitSetting(e){var t;null===(t=this.form.get("limitSetting"))||void 0===t||t.setValue(e)}}class Ie{constructor(e){this.form=e}get titleSetting(){const e=this.form.get("titleSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get igvSetting(){const e=this.form.get("igvSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get tagsSetting(){const e=this.form.get("tagsSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get serieSetting(){const e=this.form.get("serieSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get correlativeSetting(){const e=this.form.get("correlativeSetting");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}}class we{constructor(e){this.form=e}get titleSetting(){var e;const t=(null===(e=this.form.get("titleSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"titulo")}get igvSetting(){var e;const t=(null===(e=this.form.get("igvSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"igv")}get tagsSetting(){var e;const t=(null===(e=this.form.get("tagsSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"tags")}get serieSetting(){var e;const t=(null===(e=this.form.get("serieSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"serie")}get correlativeSetting(){var e;const t=(null===(e=this.form.get("correlativeSetting"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"correlativo")}setErrorCondition(e,t){var n,i;const r=(null===(n=null==e?void 0:e.minlength)||void 0===n?void 0:n.requiredLength)||(null===(i=null==e?void 0:e.maxlength)||void 0===i?void 0:i.requiredLength)||"";return{required:"Este campo es requerido",minlength:`Este campo tiene un tama\xf1o minimo de ${r}`,maxlength:`Este campo tiene un tama\xf1o maximo de ${r}`,pattern:`Coloque un(a) ${t} valido(a)`}[Object.keys(e)[0]]}}class Ne{constructor(e){const{titleSetting:t,igvSetting:n,tagsSetting:i,serieSetting:r,correlativeSetting:s}=e.value;this.title=t,this.igv=n,this.tags=i,this.serie=r,this.correlative=s}}var Oe=n(9530),Me=n(981);let Je=(()=>{class e{constructor(){}setNewSetting(e,t){const{title:n,igv:i,serie:r,correlative:s}=t;e.setValue({titleSetting:n,tagsSetting:[],igvSetting:i,serieSetting:r,correlativeSetting:s})}reset(e){e.reset({titleSetting:"",serieSetting:"01",igvSetting:0,correlativeSetting:"0001"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pe=(()=>{class e{constructor(e,t){this.http=e,this.env=t,this.apiUrl=this.env.getApiUrl()}getSetting(){return this.http.get(`${this.apiUrl}/admins/settings`).pipe((0,o.U)(({setting:e})=>e))}updateSetting(e,t,n,i){const r=new FormData;return this.destructureData(e,t,r,n,i),this.http.put(`${this.apiUrl}/admins/settings`,r)}getImg(e){return e.includes("https")||e.includes("http")?e:"https://res.cloudinary.com/gigga/image/upload/v1633757380/mrstems/no-image_dgujkr.jpg"}destructureData(e,t,n,i,r){const{title:s,igv:o,tags:a,serie:l,correlative:c}=e;s&&n.append("title",s);for(const g of a)n.append("tags",JSON.stringify(g));n.append("igv",o),n.append("serie",l),n.append("correlative",c),n.append("file",t),i&&n.append("pidLogo",i),r&&n.append("pidLogoWhite",r)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(a.eN),s.LFG(l.I))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ee=["dropLogoConfig"],Fe=["dropLogoWhiteConfig"];function Qe(e,t){1&e&&(s.TgZ(0,"label",41),s._uU(1," Titulo "),s.qZA())}function Le(e,t){if(1&e&&(s.TgZ(0,"label",42),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.titleSetting)}}function Ye(e,t){1&e&&(s.TgZ(0,"label",43),s._uU(1," Serie "),s.qZA())}function $e(e,t){if(1&e&&(s.TgZ(0,"label",44),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.serieSetting)}}function Be(e,t){1&e&&(s.TgZ(0,"label",45),s._uU(1," Correlativo "),s.qZA())}function je(e,t){if(1&e&&(s.TgZ(0,"label",46),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.correlativeSetting)}}function De(e,t){1&e&&(s.TgZ(0,"label",47),s._uU(1," igv "),s.qZA())}function Ge(e,t){if(1&e&&(s.TgZ(0,"label",48),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.igvSetting)}}function Re(e,t){if(1&e&&(s.TgZ(0,"tr"),s.ynx(1,49),s.TgZ(2,"td",50),s._UZ(3,"input",51),s.qZA(),s.TgZ(4,"td",52),s._UZ(5,"input",53),s.qZA(),s.BQk(),s.TgZ(6,"td",54),s.TgZ(7,"button",55),s._UZ(8,"ion-icon",56),s.qZA(),s.qZA(),s.qZA()),2&e){const e=t.index;s.xp6(1),s.Q6J("formGroupName",e)}}function ze(e,t){1&e&&s._UZ(0,"Loading")}const Ve=function(e){return{"border-danger":e}},Ke=function(e){return{disabled:e}};let We=(()=>{class e{constructor(e,t,n,i,r){this.render=e,this.fb=t,this.router=n,this.settingServ=i,this.settingsServ=r,this.fc=new he.h(this.router),this.id="",this.subs=new u.w,this.load=!1,this.pidLogo="",this.pidLogoWhite="",this.imgTypes=Me.G,this.imgSelectLogo="",this.imgSelectLogoWhite="",this.imgElLogo=this.render.createElement("img"),this.imgElLogoWhite=this.render.createElement("img"),this.initForm()}ngOnInit(){this.initSetting()}ngOnDestroy(){this.subs.unsubscribe()}ngDoCheck(){this.render.setAttribute(this.imgElLogo,"src",this.imgSelectLogo),this.dropLogoConfig&&this.render.appendChild(this.dropLogoConfig.nativeElement,this.imgElLogo),this.render.setAttribute(this.imgElLogoWhite,"src",this.imgSelectLogoWhite),this.dropLogoWhiteConfig&&(this.render.appendChild(this.dropLogoWhiteConfig.nativeElement,this.imgElLogoWhite),this.render.addClass(this.dropLogoWhiteConfig.nativeElement,"drop-blue"))}initSetting(){this.subs.add(this.settingsServ.getSetting().subscribe(e=>{this.settingServ.setNewSetting(this.settingForm,e),this.imgSelectLogo=this.settingsServ.getImg(e.logo.url),this.pidLogo=e.logo.public_id,this.imgSelectLogoWhite=this.settingsServ.getImg(e.logo_white.url),this.pidLogoWhite=e.logo_white.public_id,e.tags.forEach(e=>{this.valueCC.tags.push(this.fb.group({tagName:[e.tagName,ce.kI.required],icon:[e.icon,ce.kI.required]}))})}))}initForm(){this.settingForm=this.fb.group({titleSetting:["",ce.kI.required],igvSetting:[0,ce.kI.required],tagsSetting:this.fb.array([]),serieSetting:["001",ce.kI.required],correlativeSetting:["001",ce.kI.required]}),this.initControls()}initControls(){this.valueCC=new ke(this.settingForm),this.validCC=new Ie(this.settingForm),this.errorsCC=new we(this.settingForm)}submitForm(e){if(e.invalid)return Object.values(e.controls).forEach(t=>{t instanceof ce.cw?Object.values(t.controls).forEach(t=>{t.markAsTouched(),this.settingServ.reset(e)}):(t.markAsTouched(),this.settingServ.reset(e))});{this.load=!0;const t=new Ne(e);this.settingsServ.updateSetting(t,this.fileLogo,this.pidLogo,this.pidLogoWhite).subscribe(({ok:e,msg:t,setting:n})=>{this.fc.submitSuccessNoRedirect(e,t,n),this.load=!1})}}addTag(){this.valueCC.tags.push(this.fb.group({tagName:["",ce.kI.required],icon:["",ce.kI.required]}))}onFileChangeLogo(e){let t=new FileReader;const n=new Oe.f;if(n.existImg(e)){let i=e.target.files[0];n.typesImg(i,this.imgTypes)&&n.sizeImg(i,4e6)?(t.onload=e=>this.imgSelectLogo=t.result,t.readAsDataURL(i),this.fileLogo=i):this.imgSelectLogo=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.Qsj),s.Y36(ce.qu),s.Y36(r.F0),s.Y36(Je),s.Y36(Pe))},e.\u0275cmp=s.Xpm({type:e,selectors:[["Settings"]],viewQuery:function(e,t){if(1&e&&(s.Gf(Ee,5),s.Gf(Fe,5)),2&e){let e;s.iGM(e=s.CRH())&&(t.dropLogoConfig=e.first),s.iGM(e=s.CRH())&&(t.dropLogoWhiteConfig=e.first)}},decls:66,vars:27,consts:[[1,"setting","animated","fadein"],[1,"setting__header"],[1,"setting__title"],["href","javascript:window.history.back()","rel","noopener",1,"tag","tag--primary"],["name","arrow-back-outline"],[1,"setting__content"],["novalidate","",1,"form","form--settings","animated","fadein",3,"formGroup","ngSubmit"],[1,"form__group"],["formControlName","titleSetting","name","titleSetting","type","text","placeholder"," ","id","titleSetting",1,"form__input",3,"ngClass"],["for","titleSetting","class","form__label",4,"ngIf"],["for","titleSetting","class","form__label text-danger",4,"ngIf"],["formControlName","serieSetting","name","serieSetting","type","text","placeholder"," ","id","serieSetting",1,"form__input",3,"ngClass"],["for","serieSetting","class","form__label",4,"ngIf"],["for","serieSetting","class","form__label text-danger",4,"ngIf"],["formControlName","correlativeSetting","name","correlativeSetting","type","text","placeholder"," ","id","correlativeSetting",1,"form__input",3,"ngClass"],["for","correlativeSetting","class","form__label",4,"ngIf"],["for","correlativeSetting","class","form__label text-danger",4,"ngIf"],["formControlName","igvSetting","name","igvSetting","type","number","min","0","placeholder"," ","id","igvSetting",1,"form__input",3,"ngClass"],["for","igvSetting","class","form__label",4,"ngIf"],["for","igvSetting","class","form__label text-danger",4,"ngIf"],[1,"form__group","form__group--uploader"],[1,"uploader"],["dropLogoConfig",""],["id","file-logo","type","file","name","fileUpload","accept","image/*",3,"change"],["for","file-logo","id","file-drag"],["id","file-image","src","#","alt","Preview",1,"hidden"],["id","start"],["name","download-outline"],["id","notimage",1,"hidden"],["id","file-upload-btn",1,"btn","btn-primary"],["id","response",1,"hidden"],["id","messages"],["id","file-progress","value","0",1,"progress"],[1,"form__group","form__group--table"],[1,"rwd-table"],["formArrayName","tagsSetting"],[4,"ngFor","ngForOf"],["data-th","Agrega un tag","colspan","3"],["type","button",1,"btn","btn--block",3,"click"],["type","submit",1,"btn","btn--secondary",3,"ngClass","disabled"],[4,"ngIf"],["for","titleSetting",1,"form__label"],["for","titleSetting",1,"form__label","text-danger"],["for","serieSetting",1,"form__label"],["for","serieSetting",1,"form__label","text-danger"],["for","correlativeSetting",1,"form__label"],["for","correlativeSetting",1,"form__label","text-danger"],["for","igvSetting",1,"form__label"],["for","igvSetting",1,"form__label","text-danger"],[3,"formGroupName"],["data-th","Nombre"],["type","text","id","text-input","placeholder","Nombre","formControlName","tagName","name","tagName",1,"form-control"],["data-th","Icono"],["type","text","id","text-input","placeholder","Icono","formControlName","icon","name","icon",1,"form-control"],["data-th","Eliminar"],["type","button",1,"btn","btn--danger","btn--icon"],["name","trash-outline"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h3",2),s._uU(3,"Configuraciones"),s.qZA(),s.TgZ(4,"a",3),s._UZ(5,"ion-icon",4),s._uU(6," Ir atr\xe1s"),s.qZA(),s.qZA(),s.TgZ(7,"div",5),s.TgZ(8,"p"),s._uU(9,"Configuracion para tickets y tags"),s.qZA(),s.qZA(),s.qZA(),s._UZ(10,"hr"),s.TgZ(11,"form",6),s.NdJ("ngSubmit",function(){return t.submitForm(t.settingForm)}),s.TgZ(12,"div",7),s._UZ(13,"input",8),s.YNc(14,Qe,2,0,"label",9),s.YNc(15,Le,2,1,"label",10),s.qZA(),s.TgZ(16,"div",7),s._UZ(17,"input",11),s.YNc(18,Ye,2,0,"label",12),s.YNc(19,$e,2,1,"label",13),s.qZA(),s.TgZ(20,"div",7),s._UZ(21,"input",14),s.YNc(22,Be,2,0,"label",15),s.YNc(23,je,2,1,"label",16),s.qZA(),s.TgZ(24,"div",7),s._UZ(25,"input",17),s.YNc(26,De,2,0,"label",18),s.YNc(27,Ge,2,1,"label",19),s.qZA(),s.TgZ(28,"div",20),s.TgZ(29,"div",21,22),s.TgZ(31,"input",23),s.NdJ("change",function(e){return t.onFileChangeLogo(e)}),s.qZA(),s.TgZ(32,"label",24),s._UZ(33,"img",25),s.TgZ(34,"div",26),s._UZ(35,"ion-icon",27),s.TgZ(36,"div"),s._uU(37,"Seleccione logo o arrastrelo aqui"),s.qZA(),s.TgZ(38,"div",28),s._uU(39,"Seleccione logo"),s.qZA(),s.TgZ(40,"span",29),s._uU(41,"Seleccione logo"),s.qZA(),s.qZA(),s.TgZ(42,"div",30),s._UZ(43,"div",31),s.TgZ(44,"progress",32),s.TgZ(45,"span"),s._uU(46,"0"),s.qZA(),s._uU(47,"% "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(48,"div",33),s.TgZ(49,"table",34),s.TgZ(50,"tr"),s.TgZ(51,"th"),s._uU(52,"Nombre"),s.qZA(),s.TgZ(53,"th"),s._uU(54,"Icono"),s.qZA(),s.TgZ(55,"th"),s._uU(56,"Eliminar"),s.qZA(),s.qZA(),s.TgZ(57,"tbody",35),s.YNc(58,Re,9,1,"tr",36),s.TgZ(59,"tr"),s.TgZ(60,"td",37),s.TgZ(61,"button",38),s.NdJ("click",function(){return t.addTag()}),s._uU(62," + Agregar "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(63,"button",39),s._uU(64," Actualizar "),s.qZA(),s.qZA(),s.YNc(65,ze,1,0,"Loading",40)),2&e&&(s.xp6(11),s.Q6J("formGroup",t.settingForm),s.xp6(2),s.Q6J("ngClass",s.VKq(17,Ve,t.validCC.titleSetting)),s.xp6(1),s.Q6J("ngIf",!t.validCC.titleSetting),s.xp6(1),s.Q6J("ngIf",t.validCC.titleSetting),s.xp6(2),s.Q6J("ngClass",s.VKq(19,Ve,t.validCC.serieSetting)),s.xp6(1),s.Q6J("ngIf",!t.validCC.serieSetting),s.xp6(1),s.Q6J("ngIf",t.validCC.serieSetting),s.xp6(2),s.Q6J("ngClass",s.VKq(21,Ve,t.validCC.correlativeSetting)),s.xp6(1),s.Q6J("ngIf",!t.validCC.correlativeSetting),s.xp6(1),s.Q6J("ngIf",t.validCC.correlativeSetting),s.xp6(2),s.Q6J("ngClass",s.VKq(23,Ve,t.validCC.igvSetting)),s.xp6(1),s.Q6J("ngIf",!t.validCC.igvSetting),s.xp6(1),s.Q6J("ngIf",t.validCC.igvSetting),s.xp6(31),s.Q6J("ngForOf",t.valueCC.tags.controls),s.xp6(5),s.Q6J("ngClass",s.VKq(25,Ke,!t.settingForm.valid))("disabled",!t.settingForm.valid),s.xp6(2),s.Q6J("ngIf",t.load))},directives:[ce._Y,ce.JL,ce.sg,ce.Fj,ce.JJ,ce.u,i.mk,i.O5,ce.wV,ce.qQ,ce.CE,i.sg,ce.x0,P.N],styles:[".setting[_ngcontent-%COMP%]{padding:2rem}.setting__title[_ngcontent-%COMP%]{font-size:2.5rem}.setting__header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-end;justify-content:space-between}.setting__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.setting__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.33rem;margin-right:.2rem}.form--settings[_ngcontent-%COMP%]{grid-template-rows:.3fr 1.7fr}@media screen and (max-width: 430px){.form--settings[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(10rem,1fr))}}.form__group--table[_ngcontent-%COMP%]{grid-column:span 2}button[_ngcontent-%COMP%]{max-height:3rem}"]}),e})();class He{constructor(e){this.form=e}get nameUser(){const e=this.form.get("nameUser");return null==e?void 0:e.value}get lastnameUser(){const e=this.form.get("lastnameUser");return null==e?void 0:e.value}get emailUser(){const e=this.form.get("emailUser");return null==e?void 0:e.value}get genderUser(){const e=this.form.get("genderUser");return null==e?void 0:e.value}get countryUser(){const e=this.form.get("countryUser");return null==e?void 0:e.value}get roleUser(){const e=this.form.get("roleUser");return null==e?void 0:e.value}get phoneUser(){const e=this.form.get("phoneUser");return null==e?void 0:e.value}get passUser(){const e=this.form.get("passUser");return null==e?void 0:e.value}get perfilUser(){const e=this.form.get("perfilUser");return null==e?void 0:e.value}}class Xe{constructor(e){this.form=e}get nameUser(){const e=this.form.get("nameUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get lastnameUser(){const e=this.form.get("lastnameUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get emailUser(){const e=this.form.get("emailUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get passUser(){const e=this.form.get("passUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get roleUser(){const e=this.form.get("roleUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get genderUser(){const e=this.form.get("genderUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get phoneUser(){const e=this.form.get("phoneUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}get countryUser(){const e=this.form.get("countryUser");return(null==e?void 0:e.invalid)&&(null==e?void 0:e.touched)&&(null==e?void 0:e.dirty)}}class et{constructor(e){this.form=e}get nameUser(){var e;const t=(null===(e=this.form.get("nameUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"nombre")}get lastnameUser(){var e;const t=(null===(e=this.form.get("lastnameUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"apellido")}get emailUser(){var e;const t=(null===(e=this.form.get("emailUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"correo")}get phoneUser(){var e;const t=(null===(e=this.form.get("phoneUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}get genderUser(){var e;const t=(null===(e=this.form.get("genderUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"genero")}get passUser(){var e;const t=(null===(e=this.form.get("passUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"contrase\xf1a")}get roleUser(){var e;const t=(null===(e=this.form.get("roleUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"role")}get countryUser(){var e;const t=(null===(e=this.form.get("countryUser"))||void 0===e?void 0:e.errors)||{};return this.setErrorCondition(t,"telefono")}setErrorCondition(e,t){var n,i;const r=(null===(n=null==e?void 0:e.minlength)||void 0===n?void 0:n.requiredLength)||(null===(i=null==e?void 0:e.maxlength)||void 0===i?void 0:i.requiredLength)||"";return{required:"Este campo es requerido",minlength:`Este campo tiene un tama\xf1o minimo de ${r}`,maxlength:`Este campo tiene un tama\xf1o maximo de ${r}`,pattern:`Coloque un(a) ${t} valido(a)`}[Object.keys(e)[0]]}}class tt{constructor(e){this.name="",this.lastname="",this.email="",this.country="",this.gender="",this.role="USER",this.password="",this.phone="",this.birthday="",this.dni="",this.active=!0;const t=e.value,{nameUser:n,lastnameUser:i,emailUser:r,passUser:s,countryUser:o,genderUser:a,roleUser:l}=t,c=(0,D._T)(t,["nameUser","lastnameUser","emailUser","passUser","countryUser","genderUser","roleUser"]);this.name=n,this.lastname=i,this.email=r,this.password=s,this.country=o,this.gender=a,this.role=l,this.fillOtherFields(c)}fillOtherFields(e){const{phoneUser:t}=e;this.phone=t||""}}let nt=(()=>{class e{constructor(e,t){this.http=e,this.env=t,this.apiUrl=this.env.getApiUrl()}getUsers(e,t,n){return this.http.get(`${this.apiUrl}/admins/users/paginado?term=${e}&page=${t}&limit=${n}`).pipe((0,o.U)(({users:e})=>e))}getUser(e){return this.http.get(`${this.apiUrl}/admins/users/${e}`).pipe((0,o.U)(({user:e})=>e))}createUser(e,t,n){const i=new FormData;return this.destructureData(e,t,i,n),this.http.post(`${this.apiUrl}/admins/users`,i)}updateUser(e,t,n,i){const r=new FormData;return this.destructureData(t,n,r,i),this.http.put(`${this.apiUrl}/admins/users/${e}`,r)}deactivateUser(e){return this.http.patch(`${this.apiUrl}/admins/users/${e}`,{active:!1})}activateUser(e){return this.http.patch(`${this.apiUrl}/admins/users/${e}`,{active:!0})}deleteUser(e){return this.http.delete(`${this.apiUrl}/admins/users/${e}`)}getImg(e){return e.includes("https")||e.includes("http")?e:""}destructureData(e,t,n,i){const{name:r,lastname:s,gender:o,password:a,email:l,phone:c,country:g,role:u}=e;n.append("name",r),n.append("lastname",s),n.append("gender",o),n.append("email",l),n.append("phone",c),n.append("country",g),n.append("role",u),a&&n.append("password",a),n.append("file",t),i&&n.append("public_id",i)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(a.eN),s.LFG(l.I))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),it=(()=>{class e{constructor(){}setNewUser(e,t){const{name:n,lastname:i,email:r,country:s,phone:o,gender:a,role:l}=t;e.setValue({nameUser:n,lastnameUser:i,emailUser:r,passUser:"********",countryUser:s,genderUser:a,phoneUser:o,roleUser:l})}reset(e){e.reset({nameUser:"",lastnameUser:"",emailUser:"",passUser:"",countryUser:"Peru",genderUser:"M",roleUser:"USER"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const rt=["dropProfile"];function st(e,t){1&e&&(s.TgZ(0,"label",50),s._uU(1," Nombre "),s.qZA())}function ot(e,t){if(1&e&&(s.TgZ(0,"label",51),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.nameUser)}}function at(e,t){1&e&&(s.TgZ(0,"label",52),s._uU(1," Apellido "),s.qZA())}function lt(e,t){if(1&e&&(s.TgZ(0,"label",53),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.lastnameUser)}}function ct(e,t){1&e&&(s.TgZ(0,"label",54),s._uU(1," Correo "),s.qZA())}function gt(e,t){if(1&e&&(s.TgZ(0,"label",55),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.emailUser)}}function ut(e,t){1&e&&(s.TgZ(0,"label",56),s._uU(1," Telefono "),s.qZA())}function dt(e,t){if(1&e&&(s.TgZ(0,"label",57),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.phoneUser)}}function mt(e,t){1&e&&(s.TgZ(0,"label",58),s._uU(1," Telefono "),s.qZA())}function ht(e,t){if(1&e&&(s.TgZ(0,"label",59),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.countryUser)}}function pt(e,t){1&e&&(s.TgZ(0,"label",60),s._uU(1," Rol "),s.qZA())}function ft(e,t){if(1&e&&(s.TgZ(0,"label",61),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorsCC.roleUser)}}const vt=function(e){return{disabled:e}};function Zt(e,t){if(1&e&&(s.TgZ(0,"button",62),s._uU(1," Guardar "),s.qZA()),2&e){const e=s.oxw();s.Q6J("ngClass",s.VKq(2,vt,!e.userForm.valid))("disabled",!e.userForm.valid)}}function _t(e,t){if(1&e&&(s.TgZ(0,"button",63),s._uU(1," Actualizar "),s.qZA()),2&e){const e=s.oxw();s.Q6J("ngClass",s.VKq(2,vt,!e.userForm.valid))("disabled",!e.userForm.valid)}}function bt(e,t){1&e&&s._UZ(0,"Loading")}const Ct=function(e){return{"border-danger":e}};let Ut=(()=>{class e{constructor(e,t,n,i,r,s,o){this.render=e,this.fb=t,this.router=n,this.route=i,this.usersDataServ=r,this.userDataServ=s,this.validServ=o,this.public_id="",this.isUpdate=!1,this.id="",this.load=!1,this.routeInit="/admin/users",this.fc=new he.h(this.router),this.subs=new u.w,this.imgTypes=Me.G,this.imgSelect="",this.imgEl=this.render.createElement("img"),this.initForm()}ngOnInit(){this.newUser()}ngOnDestroy(){this.subs.unsubscribe()}ngDoCheck(){this.render.setAttribute(this.imgEl,"src",this.imgSelect),this.dropProfile&&this.render.appendChild(this.dropProfile.nativeElement,this.imgEl)}newUser(){this.route.params.subscribe(({id:e})=>{this.id=e,"new"!=e&&this.subs.add(this.usersDataServ.getUser(e).subscribe(e=>{this.userDataServ.setNewUser(this.userForm,e),this.imgSelect=this.usersDataServ.getImg(e.profile.url),this.public_id=e.profile.public_id,this.isUpdate=!0}))})}initForm(){this.userForm=this.fb.group({nameUser:["",[ce.kI.required,ce.kI.minLength(2),ce.kI.pattern(this.validServ.onlyString)]],lastnameUser:["",[ce.kI.required,ce.kI.minLength(3),ce.kI.pattern(this.validServ.onlyString)]],emailUser:["",[ce.kI.required,ce.kI.minLength(6),ce.kI.pattern(this.validServ.onlyEmail)]],passUser:["",[ce.kI.required,ce.kI.minLength(8)]],countryUser:["Peru"],genderUser:["M",ce.kI.required],phoneUser:[""],roleUser:["USER",ce.kI.required]}),this.initControls()}initControls(){this.valueCC=new He(this.userForm),this.validCC=new Xe(this.userForm),this.errorsCC=new et(this.userForm)}submitForm(e){if(e.invalid)return Object.values(e.controls).forEach(t=>{t instanceof ce.cw?Object.values(t.controls).forEach(t=>{t.markAsTouched(),this.userDataServ.reset(e)}):(t.markAsTouched(),this.userDataServ.reset(e))});{const t=new tt(e);"new"===this.id?this.usersDataServ.createUser(t,this.file,this.public_id).subscribe(({ok:e,msg:t,user:n})=>{this.fc.submitSuccess(e,t,n,this.routeInit),this.load=!0}):this.usersDataServ.updateUser(this.id,t,this.file,this.public_id).subscribe(({ok:e,msg:t,user:n})=>{console.log(n),this.fc.submitSuccess(e,t,n,this.routeInit),this.load=!0})}}onFileChange(e){let t=new FileReader;const n=new Oe.f;if(n.existImg(e)){let i=e.target.files[0];n.typesImg(i,this.imgTypes)&&n.sizeImg(i,4e6)?(t.onload=e=>this.imgSelect=t.result,t.readAsDataURL(i),this.file=i):this.imgSelect=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.Qsj),s.Y36(ce.qu),s.Y36(r.F0),s.Y36(r.gz),s.Y36(nt),s.Y36(it),s.Y36(fe.S))},e.\u0275cmp=s.Xpm({type:e,selectors:[["User"]],viewQuery:function(e,t){if(1&e&&s.Gf(rt,5),2&e){let e;s.iGM(e=s.CRH())&&(t.dropProfile=e.first)}},decls:73,vars:39,consts:[[1,"user","animated","fadein"],[1,"user__header"],[1,"user__title"],["href","javascript:window.history.back()","rel","noopener",1,"tag","tag--primary"],["name","arrow-back-outline"],[1,"user__content"],["novalidate","",1,"form","animated","fadein",3,"formGroup","ngSubmit"],[1,"form__group"],["formControlName","nameUser","name","nameUser","type","text","placeholder"," ","id","nameUser",1,"form__input",3,"ngClass"],["for","nameUser","class","form__label",4,"ngIf"],["for","nameUser","class","form__label text-danger",4,"ngIf"],["formControlName","lastnameUser","name","lastnameUser","type","text","placeholder"," ","id","lastnameUser",1,"form__input",3,"ngClass"],["for","lastnameUser","class","form__label",4,"ngIf"],["for","lastnameUser","class","form__label text-danger",4,"ngIf"],["formControlName","emailUser","name","emailUser","type","email","placeholder"," ","id","emailUser",1,"form__input",3,"ngClass"],["for","emailUser","class","form__label",4,"ngIf"],["for","emailUser","class","form__label text-danger",4,"ngIf"],["formControlName","phoneUser","name","phoneUser","type","text","placeholder"," ","id","phoneUser",1,"form__input",3,"ngClass"],["for","phoneUser","class","form__label",4,"ngIf"],["for","phoneUser","class","form__label text-danger",4,"ngIf"],["formControlName","countryUser","name","countryUser","type","text","placeholder"," ","id","countryUser",1,"form__input",3,"ngClass"],["for","countryUser","class","form__label",4,"ngIf"],["for","countryUser","class","form__label text-danger",4,"ngIf"],["formControlName","roleUser","name","roleUser","type","text","placeholder"," ","id","roleUser",1,"form__input",3,"ngClass"],["for","roleUser","class","form__label",4,"ngIf"],["for","roleUser","class","form__label text-danger",4,"ngIf"],["formControlName","passUser","name","passUser","type","text","placeholder"," ","id","passUser",1,"form__input",3,"ngClass"],["for","passUser",1,"form__label"],[1,"form__group","form__group--uploader"],[1,"uploader"],["dropProfile",""],["id","file-logo-white","type","file","name","fileUpload","accept","image/*",3,"change"],["for","file-logo-white","id","file-drag"],["id","file-image","src","#","alt","Preview",1,"hidden"],["id","start"],["name","download-outline"],["id","notimage",1,"hidden"],["id","file-upload-btn",1,"btn","btn-primary"],["id","response",1,"hidden"],["id","messages"],["id","file-progress","value","0",1,"progress"],["for","select-input",1,"form-label"],[1,"form-check","form-check-inline"],["formControlName","genderUser","type","radio","id","ex-radio-4","name","genderUser","value","M",1,"form-check-input"],["for","ex-radio-4",1,"form-check-label"],["formControlName","genderUser","type","radio","id","ex-radio-5","name","genderUser","value","F",1,"form-check-input"],["for","ex-radio-5",1,"form-check-label"],["class","btn btn--primary","type","submit",3,"ngClass","disabled",4,"ngIf"],["class","btn btn--secondary","type","submit",3,"ngClass","disabled",4,"ngIf"],[4,"ngIf"],["for","nameUser",1,"form__label"],["for","nameUser",1,"form__label","text-danger"],["for","lastnameUser",1,"form__label"],["for","lastnameUser",1,"form__label","text-danger"],["for","emailUser",1,"form__label"],["for","emailUser",1,"form__label","text-danger"],["for","phoneUser",1,"form__label"],["for","phoneUser",1,"form__label","text-danger"],["for","countryUser",1,"form__label"],["for","countryUser",1,"form__label","text-danger"],["for","roleUser",1,"form__label"],["for","roleUser",1,"form__label","text-danger"],["type","submit",1,"btn","btn--primary",3,"ngClass","disabled"],["type","submit",1,"btn","btn--secondary",3,"ngClass","disabled"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h3",2),s._uU(3,"Usuarios"),s.qZA(),s.TgZ(4,"a",3),s._UZ(5,"ion-icon",4),s._uU(6," Ir atr\xe1s"),s.qZA(),s.qZA(),s.TgZ(7,"div",5),s.TgZ(8,"p"),s._uU(9,"Crea los usuarios con solo estos campos requeridos"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"form",6),s.NdJ("ngSubmit",function(){return t.submitForm(t.userForm)}),s.TgZ(11,"div",7),s._UZ(12,"input",8),s.YNc(13,st,2,0,"label",9),s.YNc(14,ot,2,1,"label",10),s.qZA(),s.TgZ(15,"div",7),s._UZ(16,"input",11),s.YNc(17,at,2,0,"label",12),s.YNc(18,lt,2,1,"label",13),s.qZA(),s.TgZ(19,"div",7),s._UZ(20,"input",14),s.YNc(21,ct,2,0,"label",15),s.YNc(22,gt,2,1,"label",16),s.qZA(),s.TgZ(23,"div",7),s._UZ(24,"input",17),s.YNc(25,ut,2,0,"label",18),s.YNc(26,dt,2,1,"label",19),s.qZA(),s.TgZ(27,"div",7),s._UZ(28,"input",20),s.YNc(29,mt,2,0,"label",21),s.YNc(30,ht,2,1,"label",22),s.qZA(),s.TgZ(31,"div",7),s._UZ(32,"input",23),s.YNc(33,pt,2,0,"label",24),s.YNc(34,ft,2,1,"label",25),s.qZA(),s.TgZ(35,"div",7),s._UZ(36,"input",26),s.TgZ(37,"label",27),s._uU(38," Contrase\xf1a "),s.qZA(),s.qZA(),s.TgZ(39,"div",28),s.TgZ(40,"div",29,30),s.TgZ(42,"input",31),s.NdJ("change",function(e){return t.onFileChange(e)}),s.qZA(),s.TgZ(43,"label",32),s._UZ(44,"img",33),s.TgZ(45,"div",34),s._UZ(46,"ion-icon",35),s.TgZ(47,"div"),s._uU(48,"Seleccione imagen o arrastrelo aqui"),s.qZA(),s.TgZ(49,"div",36),s._uU(50,"Seleccione imagen"),s.qZA(),s.TgZ(51,"span",37),s._uU(52,"Seleccione imagen"),s.qZA(),s.qZA(),s.TgZ(53,"div",38),s._UZ(54,"div",39),s.TgZ(55,"progress",40),s.TgZ(56,"span"),s._uU(57,"0"),s.qZA(),s._uU(58,"% "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(59,"div",7),s.TgZ(60,"label",41),s._uU(61,"Genero "),s.qZA(),s.TgZ(62,"div",42),s._UZ(63,"input",43),s.TgZ(64,"label",44),s._uU(65,"M"),s.qZA(),s.qZA(),s.TgZ(66,"div",42),s._UZ(67,"input",45),s.TgZ(68,"label",46),s._uU(69,"F"),s.qZA(),s.qZA(),s.qZA(),s.YNc(70,Zt,2,4,"button",47),s.YNc(71,_t,2,4,"button",48),s.qZA(),s.YNc(72,bt,1,0,"Loading",49)),2&e&&(s.xp6(10),s.Q6J("formGroup",t.userForm),s.xp6(2),s.Q6J("ngClass",s.VKq(25,Ct,t.validCC.nameUser)),s.xp6(1),s.Q6J("ngIf",!t.validCC.nameUser),s.xp6(1),s.Q6J("ngIf",t.validCC.nameUser),s.xp6(2),s.Q6J("ngClass",s.VKq(27,Ct,t.validCC.lastnameUser)),s.xp6(1),s.Q6J("ngIf",!t.validCC.lastnameUser),s.xp6(1),s.Q6J("ngIf",t.validCC.lastnameUser),s.xp6(2),s.Q6J("ngClass",s.VKq(29,Ct,t.validCC.emailUser)),s.xp6(1),s.Q6J("ngIf",!t.validCC.emailUser),s.xp6(1),s.Q6J("ngIf",t.validCC.emailUser),s.xp6(2),s.Q6J("ngClass",s.VKq(31,Ct,t.validCC.phoneUser)),s.xp6(1),s.Q6J("ngIf",!t.validCC.phoneUser),s.xp6(1),s.Q6J("ngIf",t.validCC.phoneUser),s.xp6(2),s.Q6J("ngClass",s.VKq(33,Ct,t.validCC.countryUser)),s.xp6(1),s.Q6J("ngIf",!t.validCC.countryUser),s.xp6(1),s.Q6J("ngIf",t.validCC.countryUser),s.xp6(2),s.ekj("disabled",t.isUpdate),s.Q6J("ngClass",s.VKq(35,Ct,t.validCC.roleUser)),s.xp6(1),s.Q6J("ngIf",!t.validCC.roleUser),s.xp6(1),s.Q6J("ngIf",t.validCC.roleUser),s.xp6(2),s.Q6J("ngClass",s.VKq(37,vt,t.isUpdate)),s.xp6(34),s.Q6J("ngIf",!t.isUpdate),s.xp6(1),s.Q6J("ngIf",t.isUpdate),s.xp6(1),s.Q6J("ngIf",t.load))},directives:[ce._Y,ce.JL,ce.sg,ce.Fj,ce.JJ,ce.u,i.mk,i.O5,ce._,P.N],styles:[".user[_ngcontent-%COMP%]{padding:2rem}.user__title[_ngcontent-%COMP%]{font-size:2.5rem}.user__header[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between}.user__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.user__header[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.33rem;margin-right:.2rem}"]}),e})();var qt=n(8613);function At(e,t){1&e&&(s.TgZ(0,"table",22),s.TgZ(1,"tr"),s.TgZ(2,"th"),s._UZ(3,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(4,"th"),s._UZ(5,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(6,"th"),s._UZ(7,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(8,"th"),s._UZ(9,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(10,"th"),s._UZ(11,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(12,"th"),s._UZ(13,"ngx-skeleton-loader",23),s.qZA(),s.qZA(),s.TgZ(14,"tr"),s.TgZ(15,"td"),s._UZ(16,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(17,"td"),s._UZ(18,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(19,"td"),s._UZ(20,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(21,"td"),s._UZ(22,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(23,"td"),s._UZ(24,"ngx-skeleton-loader",23),s.qZA(),s.TgZ(25,"td"),s._UZ(26,"ngx-skeleton-loader",23),s.qZA(),s.qZA(),s.qZA())}function Tt(e,t){if(1&e&&(s.TgZ(0,"td",40),s.TgZ(1,"span",41),s._uU(2,"Activo"),s.qZA(),s.qZA()),2&e){const e=s.oxw().$implicit;s.ekj("disabled",!e.active)}}function xt(e,t){1&e&&(s.TgZ(0,"td",40),s.TgZ(1,"span",42),s._uU(2,"Inactivo"),s.qZA(),s.qZA())}function yt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-icon",43),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(2).updateUser(t.uid)}),s.qZA()}}function St(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-icon",44),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(2).activateUser(t.uid)}),s.qZA()}}function kt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"ion-icon",45),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(2).deactivateUser(t.uid)}),s.qZA()}}function It(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"tr"),s.TgZ(2,"td",27),s._uU(3),s.qZA(),s.TgZ(4,"td",28),s.TgZ(5,"div",29),s._UZ(6,"img",30),s.qZA(),s.qZA(),s.TgZ(7,"td",31),s._uU(8),s.qZA(),s.TgZ(9,"td",32),s._uU(10),s.qZA(),s.TgZ(11,"td",33),s._uU(12),s.qZA(),s.YNc(13,Tt,3,2,"td",34),s.YNc(14,xt,3,0,"td",35),s.TgZ(15,"td",36),s.YNc(16,yt,1,0,"ion-icon",37),s.YNc(17,St,1,0,"ion-icon",38),s.YNc(18,kt,1,0,"ion-icon",39),s.qZA(),s.qZA(),s.BQk()),2&e){const e=t.$implicit,n=t.index,i=s.oxw(2);s.xp6(2),s.ekj("disabled",!e.active),s.xp6(1),s.Oqu(n+1),s.xp6(1),s.ekj("disabled",!e.active),s.xp6(2),s.Q6J("src",e.profile.url,s.LSH)("alt",e.profile.public_id),s.xp6(1),s.ekj("disabled",!e.active),s.xp6(1),s.AsE(" ",e.name," ",e.lastname," "),s.xp6(1),s.ekj("disabled",!e.active),s.xp6(1),s.hij(" ",e.email," "),s.xp6(1),s.ekj("disabled",!e.active),s.xp6(1),s.hij(" ",e.role," "),s.xp6(1),s.Q6J("ngIf",e.active),s.xp6(1),s.Q6J("ngIf",!e.active),s.xp6(2),s.Q6J("ngIf",e.active),s.xp6(1),s.Q6J("ngIf",!e.active),s.xp6(1),s.Q6J("ngIf",e.active&&!i.noBtnDeactivateUserDash(e.uid))}}function wt(e,t){1&e&&(s.TgZ(0,"tr",46),s.TgZ(1,"td",47),s._uU(2,"No hay resultados"),s.qZA(),s.qZA())}function Nt(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"table",24),s.TgZ(2,"tr"),s.TgZ(3,"th"),s._uU(4,"#"),s.qZA(),s.TgZ(5,"th"),s._uU(6,"Perfil"),s.qZA(),s.TgZ(7,"th"),s._uU(8,"Nombre"),s.qZA(),s.TgZ(9,"th"),s._uU(10,"Correo"),s.qZA(),s.TgZ(11,"th"),s._uU(12,"Rol"),s.qZA(),s.TgZ(13,"th"),s._uU(14,"Estado"),s.qZA(),s.TgZ(15,"th"),s._uU(16,"Opciones"),s.qZA(),s.qZA(),s.YNc(17,It,19,22,"ng-container",25),s.YNc(18,wt,3,0,"tr",26),s.qZA(),s.BQk()),2&e){const e=t.$implicit;s.xp6(17),s.Q6J("ngForOf",e),s.xp6(1),s.Q6J("ngIf",0==e.length)}}const Ot=function(){return["/admin/users/new"]};let Mt=(()=>{class e{constructor(e,t,n){this.usersDataServ=e,this.userServ=t,this.router=n,this.term="",this.page=1,this.pagination={pages:[1],longitud:1,previous:0,next:2,limit:1},this.subs=new u.w,this.pagesEl=[],this.limit=10,this.notPrevPage=!1,this.notNextPage=!1}ngOnInit(){this.getUsers("",1)}ngOnDestroy(){this.subs.unsubscribe()}search(e){return this.getUsers(e,1)}getUsers(e,t){this.term=e,this.page=t,this.users$=this.usersDataServ.getUsers(e,t,this.limit).pipe((0,o.U)(e=>{var{users:t}=e,n=(0,D._T)(e,["users"]);return this.pagination=Object.assign(Object.assign({},n),{limit:this.limit}),t})),this.subs.add(this.users$.subscribe())}updateUser(e){this.router.navigate(["/admin/users/",e])}deactivateUser(e){R().fire({title:"\xbfEsta seguro de desactivar este usuario?",text:"Si continua este usuario solo tendra una opcion de habilitarlo",icon:"question",confirmButtonText:"Desactivar",showCancelButton:!0}).then(t=>{t.isConfirmed&&this.usersDataServ.deactivateUser(e).subscribe(({ok:e,msg:t})=>{R().fire({icon:"success",title:e,text:t}),this.getUsers("",1)})})}activateUser(e){this.usersDataServ.activateUser(e).subscribe(({ok:e})=>{R().fire({icon:"success",title:e,text:"Se activo esta usuario"}),this.getUsers("",1)})}deleteUser(e){R().fire({title:"\xbfEsta seguro de eliminar este usuario?",text:"Si continua este usuario se borrara permanentemente",icon:"question",confirmButtonText:"Eliminar",showCancelButton:!0}).then(t=>{t.isConfirmed&&this.usersDataServ.deleteUser(e).subscribe(({ok:e,msg:t})=>{R().fire({icon:"success",title:e,text:t}),this.getUsers("",1)})})}noBtnDeactivateUserDash(e){const{user:t}=this.userServ.getTokenInformation();return t.uid==e}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(nt),s.Y36(qt.K),s.Y36(r.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["Users"]],decls:45,vars:17,consts:[["loading",""],[1,"users","animated","fadein"],[1,"users__header"],[1,"users__title"],["name","create-outline",1,"icon--blue"],["name","checkmark-circle-outline",1,"icon--blue"],["name","close-circle-outline",1,"icon--purple"],[1,"users__content"],[1,"search"],["name","searchForNameUsers","type","text","id","inline-form-input-name","placeholder","Buscar por nombre, apellido o correo",1,"form-control","mb-3","mr-sm-4",3,"keyup.enter"],["termSearchUsers",""],["name","search-outline"],["routerLinkActive","router-link-active",1,"btn","btn--primary","btn--tag",3,"routerLink"],["name","add-outline"],[1,"list"],[1,"list__table"],[4,"ngIf","ngIfElse"],[1,"pagination"],["type","button",1,"btn","btn--sm",3,"disabled","click"],["name","chevron-back-outline"],["type","button",1,"btn","btn--sm","btn--primary",3,"disabled","click"],["name","chevron-forward-outline"],[1,"rwd-table","animated","fadein"],["count","1","appearance","line"],[1,"rwd-table"],[4,"ngFor","ngForOf"],["class","empty-table",4,"ngIf"],["data-th","#"],["data-th","Cover"],[1,"user-img","img-circle"],[3,"src","alt"],["data-th","Nombre"],["data-th","Correo"],["data-th","Pais"],["data-th","Estado",3,"disabled",4,"ngIf"],["data-th","Estado",4,"ngIf"],["data-th","Opciones",1,"td-options"],["class","icon--blue","name","create-outline",3,"click",4,"ngIf"],["class","icon--blue","name","checkmark-circle-outline",3,"click",4,"ngIf"],["class","icon--purple","name","close-circle-outline",3,"click",4,"ngIf"],["data-th","Estado"],[1,"tag","tag--primary"],[1,"tag","tag--danger"],["name","create-outline",1,"icon--blue",3,"click"],["name","checkmark-circle-outline",1,"icon--blue",3,"click"],["name","close-circle-outline",1,"icon--purple",3,"click"],[1,"empty-table"],["colspan","4"]],template:function(e,t){if(1&e){const e=s.EpF();s.YNc(0,At,27,0,"ng-template",null,0,s.W1O),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.TgZ(4,"h3",3),s._uU(5,"Usuarios"),s.qZA(),s.TgZ(6,"p"),s._uU(7," Indicaciones: Los usuarios creados pueden ser de rol USER O ADMIN "),s._UZ(8,"br"),s._UZ(9,"ion-icon",4),s._uU(10," es para editar."),s._UZ(11,"br"),s._UZ(12,"ion-icon",5),s._uU(13," es para activar la canci\xf3n "),s._UZ(14,"br"),s._UZ(15,"ion-icon",6),s._uU(16," es para desactivar al usuario, cambia solo el estado y obviamente no podra ingresar sesi\xf3n pero sus datos estar\xe1n intactos."),s._UZ(17,"br"),s.TgZ(18,"strong"),s._uU(19,"* Un usuario desactivado va a estar en gris toda la fila menos las opciones"),s.qZA(),s._UZ(20,"br"),s.TgZ(21,"strong"),s._uU(22,"* Tu usuario cuando entras no se puede desactivar"),s.qZA(),s.qZA(),s.TgZ(23,"div",7),s.TgZ(24,"div",8),s.TgZ(25,"label"),s.TgZ(26,"input",9,10),s.NdJ("keyup.enter",function(){s.CHM(e);const n=s.MAs(27);return t.search(n.value)}),s.qZA(),s._UZ(28,"ion-icon",11),s.qZA(),s.qZA(),s.TgZ(29,"a",12),s._UZ(30,"ion-icon",13),s._uU(31," Nuevo"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(32,"div",14),s.TgZ(33,"div",15),s.YNc(34,Nt,19,2,"ng-container",16),s.ALo(35,"async"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(36,"div",17),s.TgZ(37,"button",18),s.NdJ("click",function(){return t.getUsers(t.term,t.pagination.previous)}),s._UZ(38,"ion-icon",19),s._uU(39," Prev "),s.qZA(),s.TgZ(40,"span"),s._uU(41),s.qZA(),s.TgZ(42,"button",20),s.NdJ("click",function(){return t.getUsers(t.term,t.pagination.next)}),s._uU(43," Next "),s._UZ(44,"ion-icon",21),s.qZA(),s.qZA()}if(2&e){const e=s.MAs(1);s.xp6(29),s.Q6J("routerLink",s.DdM(16,Ot)),s.xp6(5),s.Q6J("ngIf",s.lcZ(35,14,t.users$))("ngIfElse",e),s.xp6(3),s.ekj("disabled",!t.pagination.previous)("btn--primary",t.pagination.previous),s.Q6J("disabled",!t.pagination.previous),s.xp6(4),s.Oqu(t.page),s.xp6(1),s.ekj("disabled",!t.pagination.next)("btn--primary",t.pagination.next),s.Q6J("disabled",!t.pagination.next)}},directives:[r.yS,r.Od,i.O5,g.xr,i.sg],pipes:[i.Ov],styles:[".users[_ngcontent-%COMP%]{padding:2rem}.users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.4;margin-bottom:1.6rem}.users__title[_ngcontent-%COMP%]{font-size:2.5rem}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:-.2rem}.users__content[_ngcontent-%COMP%]{justify-content:space-between}.users__content[_ngcontent-%COMP%], .users__content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var Jt=n(534),Pt=n(1202),Et=n(9942);const Ft=function(e){return{"main-active":e}};let Qt=(()=>{class e{constructor(e){this.toggleServ=e,this.isToggleActive=!1,this.isToggleActive$=this.toggleServ.isToggleActiveSub.asObservable()}ngOnInit(){this.isToggleActive$.subscribe(e=>this.isToggleActive=e)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Jt.Y))},e.\u0275cmp=s.Xpm({type:e,selectors:[["Private"]],decls:5,vars:3,consts:[[1,"container"],[1,"main",3,"ngClass"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"Sidebar"),s.TgZ(2,"div",1),s._UZ(3,"Navbar"),s._UZ(4,"router-outlet"),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngClass",s.VKq(1,Ft,t.isToggleActive)))},directives:[Pt.k,i.mk,Et.S,r.lC],encapsulation:2}),e})(),Lt=(()=>{class e{constructor(e,t){this.http=e,this.env=t,this.apiUrl=this.env.getApiUrl()}getCollections(){return this.http.get(`${this.apiUrl}/admins/backups/names-collections`).pipe((0,o.U)(({names:e})=>e))}backup(e){return this.http.post(`${this.apiUrl}/admins/backups/backup`,e)}backupCompressed(e){return this.http.post(`${this.apiUrl}/admins/backups/backup-gzip`,e)}backupCollection(e,t){return this.http.post(`${this.apiUrl}/admins/backups/backup/${e}`,t)}restore(e){return this.http.post(`${this.apiUrl}/admins/backups/restore`,{directory:e})}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(a.eN),s.LFG(l.I))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Yt(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"option",13),s._uU(2),s.qZA(),s.BQk()),2&e){const e=t.$implicit;s.xp6(1),s.Q6J("value",e.name),s.xp6(1),s.hij(" ",e.name," ")}}function $t(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"option",13),s._uU(2),s.qZA(),s.BQk()),2&e){const e=t.$implicit;s.xp6(1),s.Q6J("value",e.name),s.xp6(1),s.hij(" ",e.name," ")}}const Bt=[{path:"",canActivateChild:[B.p,j.u],component:Qt,children:[{path:"backups",data:{role:"ADMIN"},component:(()=>{class e{constructor(e){this.backsServ=e,this.collections=[],this.collection="",this.collectionR=""}ngOnInit(){this.getCollections()}getCollections(){this.backsServ.getCollections().subscribe(e=>this.collections=e)}backup(){const e=document.getElementById("dir");return this.backsServ.backup({directory:e.value}).subscribe(({msg:e})=>{console.log(e),R().fire({icon:"success",title:"Backup",text:e})},e=>{R().fire({icon:"error",title:"Backup",text:e.error.msg})})}backupCompressed(){const e=document.getElementById("dir");return this.backsServ.backupCompressed({directory:e.value}).subscribe(({msg:e})=>{console.log(e),R().fire({icon:"success",title:"Backup",text:e})},e=>{R().fire({icon:"error",title:"Backup",text:e.error.msg})})}chooseCollection(e){this.collection=e.value}chooseCollectionRestore(e){this.collectionR=e.value}backupCollection(){if(""!==this.collection){const e=document.getElementById("dir");this.backsServ.backupCollection(this.collection,{directory:e.value}).subscribe(({msg:e})=>{console.log(e),R().fire({icon:"success",title:"Backup",text:e})},e=>{R().fire({icon:"error",title:"Backup",text:e.error.msg})})}else R().fire({title:"No eligio coleccion",icon:"warning",text:"No eligio coleccion"})}restore(){const e=document.getElementById("dirRestore");return this.backsServ.restore(e.value).subscribe(({msg:e})=>{console.log(e),R().fire({icon:"success",title:"Restore",text:e})},e=>{console.log(e),R().fire({icon:"error",title:"Restore",text:e.error.msg})})}restoreCollection(){if(""!==this.collectionR){const e=document.getElementById("dir");this.backsServ.backupCollection(this.collectionR,{directory:e.value}).subscribe(({msg:e})=>{console.log(e),R().fire({icon:"success",title:"Backup",text:e})},e=>{R().fire({icon:"error",title:"Backup",text:e.error.msg})})}else R().fire({title:"No eligio coleccion",icon:"warning",text:"No eligio coleccion"})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Lt))},e.\u0275cmp=s.Xpm({type:e,selectors:[["Backups"]],decls:31,vars:2,consts:[["novalidate","",1,"form"],[1,"form__group","gc-2"],["name","dir","type","text","placeholder"," ","id","dir",1,"form__input"],["for","dir",1,"form__label"],[1,"form__group"],[1,"select"],[3,"change"],["selected","","disabled","","value",""],[4,"ngFor","ngForOf"],[1,"btn-group"],["type","button",1,"btn","btn--primary",3,"click"],["name","dir","type","text","placeholder"," ","id","dirRestore",1,"form__input"],["type","button",1,"btn","btn--danger",3,"click"],[3,"value"]],template:function(e,t){1&e&&(s.TgZ(0,"form",0),s.TgZ(1,"div",1),s._UZ(2,"input",2),s.TgZ(3,"label",3),s._uU(4," Directorio "),s.qZA(),s.qZA(),s.TgZ(5,"div",4),s.TgZ(6,"div",5),s.TgZ(7,"select",6),s.NdJ("change",function(e){return t.chooseCollection(e.target)}),s.TgZ(8,"option",7),s._uU(9,"Seleccione una coleccion"),s.qZA(),s.YNc(10,Yt,3,2,"ng-container",8),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"div",9),s.TgZ(12,"button",10),s.NdJ("click",function(){return t.backupCollection()}),s._uU(13," Backup coleccion "),s.qZA(),s.TgZ(14,"button",10),s.NdJ("click",function(){return t.backup()}),s._uU(15," Backup todo "),s.qZA(),s.qZA(),s.TgZ(16,"div",4),s._UZ(17,"input",11),s.TgZ(18,"label",3),s._uU(19," Directorio "),s.qZA(),s.qZA(),s.TgZ(20,"div",4),s.TgZ(21,"div",5),s.TgZ(22,"select",6),s.NdJ("change",function(e){return t.chooseCollectionRestore(e.target)}),s.TgZ(23,"option",7),s._uU(24,"Seleccione una coleccion"),s.qZA(),s.YNc(25,$t,3,2,"ng-container",8),s.qZA(),s.qZA(),s.qZA(),s.TgZ(26,"div",9),s.TgZ(27,"button",12),s.NdJ("click",function(){return t.restore()}),s._uU(28," Restaurar todo "),s.qZA(),s.TgZ(29,"button",12),s.NdJ("click",function(){return t.restore()}),s._uU(30," Restaura coleccion "),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(10),s.Q6J("ngForOf",t.collections),s.xp6(15),s.Q6J("ngForOf",t.collections))},directives:[ce._Y,ce.JL,ce.YN,ce.Kr,i.sg],styles:[".btn-group[_ngcontent-%COMP%]{display:flex;grid-gap:.4rem;gap:.4rem;align-items:flex-start;justify-content:space-between}.gc-2[_ngcontent-%COMP%]{grid-column:span 2}"]}),e})()},{path:"home",data:{role:"ADMIN"},component:$},{path:"clients",data:{role:"ADMIN"},component:le},{path:"clients/:id",data:{role:"ADMIN"},component:Se},{path:"users",data:{role:"ADMIN"},component:Mt},{path:"users/:id",data:{role:"ADMIN"},component:Ut},{path:"settings",data:{role:"ADMIN"},component:We},{path:"**",redirectTo:"home",pathMatch:"full"}]}];let jt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.Bz.forChild(Bt)],r.Bz]}),e})();class Dt{constructor(){this.baseURL="./assets/tinymce/",this.fileName="tinymce.min.js"}}"object"==typeof document&&document;let Gt=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:Dt,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez]]}),e})();var Rt=n(4466);let zt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez,jt,r.Bz,ce.UX,Rt.m,Gt.forRoot({baseURL:"./assets/tinymce/"}),g.hx.forRoot({animation:"pulse",loadingText:"This item is actually loading..."})]]}),e})()}}]);